<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Minecraft è©èªæŒ–ç¤¦</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&family=VT323&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      image-rendering: pixelated;
    }

    body {
      font-family: 'Noto Sans TC', sans-serif;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
      position: relative;
    }

    /* æ¼¸å±¤èƒŒæ™¯ */
    .gradient-bg {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(180deg, 
        #87CEEB 0%,
        #98D8E8 20%,
        #7EC8E3 40%,
        #5BA3C6 70%,
        #3D8B6F 85%,
        #2D6B4F 100%
      );
      z-index: -3;
    }

    /* è£é£¾æ–¹å¡Šå®¹å™¨ */
    .background-blocks {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: -2;
      overflow: hidden;
    }

    .floating-block {
      position: absolute;
      width: 40px;
      height: 40px;
      opacity: 0.6;
      animation: floatBlock 8s ease-in-out infinite;
    }

    .floating-block.dirt {
      background: linear-gradient(135deg, #8B6914 0%, #6B4E0A 50%, #5A3D08 100%);
      border: 2px solid #4A2D05;
    }

    .floating-block.stone {
      background: linear-gradient(135deg, #9A9A9A 0%, #7A7A7A 50%, #5A5A5A 100%);
      border: 2px solid #3A3A3A;
    }

    .floating-block.grass {
      background: linear-gradient(180deg, #7CFC00 0%, #5D8A00 30%, #8B6914 30%, #6B4E0A 100%);
      border: 2px solid #4A2D05;
    }

    .floating-block.ore {
      background: linear-gradient(135deg, #7A7A7A 0%, #5A5A5A 100%);
      border: 2px solid #3A3A3A;
      position: relative;
    }

    .floating-block.ore::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 12px;
      height: 12px;
      background: #5DADE2;
      box-shadow: 0 0 8px #5DADE2;
      animation: oreGlow 2s ease-in-out infinite;
    }

    @keyframes floatBlock {
      0%, 100% { transform: translateY(0) rotate(0deg); }
      25% { transform: translateY(-20px) rotate(5deg); }
      50% { transform: translateY(-10px) rotate(0deg); }
      75% { transform: translateY(-25px) rotate(-5deg); }
    }

    @keyframes oreGlow {
      0%, 100% { opacity: 0.8; box-shadow: 0 0 8px #5DADE2; }
      50% { opacity: 1; box-shadow: 0 0 15px #5DADE2, 0 0 25px #5DADE2; }
    }

    .game-wrapper {
      background: rgba(0, 0, 0, 0.75);
      border: 8px solid #4a4a4a;
      border-top-color: #6a6a6a;
      border-left-color: #6a6a6a;
      border-radius: 4px;
      padding: 30px;
      max-width: 800px;
      width: 95%;
      box-shadow: 
        inset 0 0 0 4px #2a2a2a,
        0 10px 40px rgba(0,0,0,0.5);
    }

    h1 {
      font-family: 'VT323', monospace;
      color: #55FF55;
      text-align: center;
      font-size: 2.5rem;
      text-shadow: 4px 4px 0px #003300, 0 0 20px #55FF55;
      margin-bottom: 20px;
      letter-spacing: 2px;
    }

    /* ç‹€æ…‹åˆ— */
    .status-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 15px;
      margin-bottom: 20px;
      padding: 15px;
      background: rgba(0,0,0,0.5);
      border: 4px solid #3a3a3a;
    }

    .stat-group {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .stat-item {
      font-family: 'VT323', monospace;
      font-size: 1.4rem;
      color: white;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .stat-item .icon {
      font-size: 1.5rem;
    }

    .level-badge {
      background: linear-gradient(180deg, #FFD700 0%, #FFA500 100%);
      color: #000;
      padding: 5px 15px;
      font-family: 'VT323', monospace;
      font-size: 1.3rem;
      border: 3px solid #8B6914;
      font-weight: bold;
    }

    /* æ„›å¿ƒé¡¯ç¤º */
    .hearts-container {
      display: flex;
      gap: 5px;
    }

    .heart {
      font-size: 1.8rem;
      filter: drop-shadow(0 0 3px #ff0000);
      transition: all 0.3s;
    }

    .heart.empty {
      opacity: 0.3;
      filter: grayscale(100%);
    }

    .heart.damage {
      animation: heartDamage 0.5s ease;
    }

    @keyframes heartDamage {
      0%, 100% { transform: scale(1); }
      25% { transform: scale(1.3); filter: brightness(2); }
      50% { transform: scale(0.8); }
      75% { transform: scale(1.1); }
    }

    /* XP æ¢ */
    .xp-container {
      margin-bottom: 20px;
    }

    .xp-bar-bg {
      background: #1a1a1a;
      border: 4px solid #0a0a0a;
      height: 30px;
      position: relative;
      overflow: hidden;
    }

    .xp-bar {
      height: 100%;
      background: linear-gradient(180deg, #7dff7d 0%, #55cc55 50%, #44aa44 50%, #338833 100%);
      transition: width 0.5s ease;
      box-shadow: inset 0 2px 0 rgba(255,255,255,0.3);
    }

    .xp-text {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-family: 'VT323', monospace;
      font-size: 1.2rem;
      color: white;
      text-shadow: 2px 2px 0 #000;
    }

    /* é¡Œç›®å€åŸŸ */
    .question-area {
      text-align: center;
      margin-bottom: 25px;
    }

    .question-label {
      font-family: 'VT323', monospace;
      color: #aaaaaa;
      font-size: 1.2rem;
      margin-bottom: 10px;
    }

    .question-word {
      font-size: 3.5rem;
      font-weight: 900;
      color: #FFFF55;
      text-shadow: 4px 4px 0px #8B8B00, 0 0 30px rgba(255,255,85,0.5);
      padding: 20px;
      background: rgba(0,0,0,0.3);
      border: 4px solid #555;
      display: inline-block;
      min-width: 200px;
      animation: float 3s ease-in-out infinite;
      /* é˜²æ­¢é¸å– */
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
      -webkit-touch-callout: none;
      pointer-events: none;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    /* è¼¸å…¥å€ */
    .input-area {
      display: flex;
      gap: 10px;
      justify-content: center;
      flex-wrap: wrap;
      margin-bottom: 20px;
    }

    .mc-input {
      font-family: 'Noto Sans TC', sans-serif;
      font-size: 1.5rem;
      padding: 12px 20px;
      width: 280px;
      background: #1a1a1a;
      border: 4px solid;
      border-color: #0a0a0a #3a3a3a #3a3a3a #0a0a0a;
      color: white;
      text-align: center;
      outline: none;
    }

    .mc-input:focus {
      border-color: #55FF55;
      box-shadow: 0 0 15px rgba(85, 255, 85, 0.3);
    }

    .mc-input.correct {
      border-color: #55FF55;
      animation: correctPulse 0.5s ease;
    }

    .mc-input.wrong {
      border-color: #FF5555;
      animation: wrongShake 0.5s ease;
    }

    @keyframes correctPulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }

    @keyframes wrongShake {
      0%, 100% { transform: translateX(0); }
      20% { transform: translateX(-10px); }
      40% { transform: translateX(10px); }
      60% { transform: translateX(-10px); }
      80% { transform: translateX(10px); }
    }

    /* Minecraft é¢¨æ ¼æŒ‰éˆ• */
    .mc-btn {
      font-family: 'VT323', monospace;
      font-size: 1.3rem;
      padding: 12px 25px;
      border: 4px solid;
      border-color: #8b8b8b #373737 #373737 #8b8b8b;
      background: linear-gradient(180deg, #7a7a7a 0%, #5a5a5a 50%, #4a4a4a 50%, #3a3a3a 100%);
      color: white;
      cursor: pointer;
      text-shadow: 2px 2px 0 #2a2a2a;
      transition: all 0.1s;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .mc-btn:hover {
      background: linear-gradient(180deg, #8a8a8a 0%, #6a6a6a 50%, #5a5a5a 50%, #4a4a4a 100%);
    }

    .mc-btn:active {
      border-color: #373737 #8b8b8b #8b8b8b #373737;
      transform: translateY(2px);
    }

    .mc-btn.primary {
      border-color: #6daa3c #2d5a1c #2d5a1c #6daa3c;
      background: linear-gradient(180deg, #5d9a2c 0%, #4d8a1c 50%, #3d7a0c 50%, #2d6a00 100%);
    }

    .mc-btn.primary:hover {
      background: linear-gradient(180deg, #6daa3c 0%, #5d9a2c 50%, #4d8a1c 50%, #3d7a0c 100%);
    }

    .mc-btn.danger {
      border-color: #aa6d3c #5a2d1c #5a2d1c #aa6d3c;
      background: linear-gradient(180deg, #c44 0%, #a33 50%, #922 50%, #811 100%);
    }

    .mc-btn.skip-btn {
      border-color: #b8860b #6b4e0a #6b4e0a #b8860b;
      background: linear-gradient(180deg, #d4a017 0%, #b8860b 50%, #9a7209 50%, #7c5c07 100%);
    }

    /* çµ±è¨ˆè³‡è¨Š */
    .stats-row {
      display: flex;
      justify-content: center;
      gap: 30px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    .stat-box {
      text-align: center;
      padding: 10px 20px;
      background: rgba(0,0,0,0.4);
      border: 3px solid #444;
    }

    .stat-box .label {
      font-family: 'VT323', monospace;
      color: #888;
      font-size: 1rem;
    }

    .stat-box .value {
      font-family: 'VT323', monospace;
      color: #fff;
      font-size: 1.8rem;
    }

    .stat-box .value.correct { color: #55FF55; }
    .stat-box .value.wrong { color: #FF5555; }
    .stat-box .value.skipped { color: #FFAA00; }

    /* é€£æ“Šé¡¯ç¤º */
    .combo-display {
      position: absolute;
      top: 50%;
      right: 30px;
      transform: translateY(-50%);
      font-family: 'VT323', monospace;
      font-size: 3rem;
      color: #FF5555;
      text-shadow: 0 0 20px #FF5555;
      display: none;
    }

    .combo-display.active {
      display: block;
      animation: comboFloat 0.5s ease;
    }

    @keyframes comboFloat {
      0% { transform: translateY(-50%) scale(0.5); opacity: 0; }
      50% { transform: translateY(-50%) scale(1.2); }
      100% { transform: translateY(-50%) scale(1); opacity: 1; }
    }

    /* çµç®—ç•«é¢ */
    .game-over-panel {
      display: none;
      text-align: center;
    }

    .game-over-panel.active {
      display: block;
    }

    .game-panel {
      display: block;
    }

    .game-panel.hidden {
      display: none;
    }

    .result-title {
      font-family: 'VT323', monospace;
      font-size: 3rem;
      color: #55FF55;
      text-shadow: 4px 4px 0 #003300;
      margin-bottom: 30px;
    }

    .result-title.fail {
      color: #FF5555;
      text-shadow: 4px 4px 0 #330000;
    }

    .result-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 15px;
      margin-bottom: 30px;
    }

    .result-stat {
      background: rgba(0,0,0,0.5);
      padding: 15px;
      border: 3px solid #444;
    }

    .result-stat .label {
      font-family: 'VT323', monospace;
      color: #888;
      font-size: 1rem;
    }

    .result-stat .value {
      font-family: 'VT323', monospace;
      font-size: 2rem;
      color: #FFD700;
    }

    /* ç²’å­æ•ˆæœ */
    .particle {
      position: fixed;
      pointer-events: none;
      font-size: 1.5rem;
      animation: particleFly 1s ease-out forwards;
      z-index: 100;
    }

    @keyframes particleFly {
      0% {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
      100% {
        opacity: 0;
        transform: translateY(-100px) scale(0.5);
      }
    }

    /* Toast é€šçŸ¥ */
    .toast {
      position: fixed;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0,0,0,0.9);
      color: #55FF55;
      padding: 15px 30px;
      border: 4px solid #55FF55;
      font-family: 'VT323', monospace;
      font-size: 1.3rem;
      z-index: 100;
      animation: toastSlide 0.3s ease;
    }

    @keyframes toastSlide {
      0% { transform: translateX(-50%) translateY(50px); opacity: 0; }
      100% { transform: translateX(-50%) translateY(0); opacity: 1; }
    }

    /* å…¨è¢å¹•æŒ‰éˆ• */
    .fullscreen-btn {
      position: fixed;
      top: 15px;
      right: 15px;
      background: rgba(0,0,0,0.7);
      border: 3px solid #55FF55;
      color: #55FF55;
      width: 45px;
      height: 45px;
      font-size: 1.3rem;
      cursor: pointer;
      z-index: 50;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
    }

    .fullscreen-btn:hover {
      background: #55FF55;
      color: #000;
    }

    /* å•†åº—é¢æ¿ */
    .shop-panel {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.8);
      z-index: 200;
      justify-content: center;
      align-items: center;
    }

    .shop-panel.active {
      display: flex;
    }

    .shop-content {
      background: #2a2a2a;
      border: 8px solid #4a4a4a;
      border-top-color: #6a6a6a;
      border-left-color: #6a6a6a;
      padding: 30px;
      text-align: center;
      max-width: 400px;
    }

    .shop-title {
      font-family: 'VT323', monospace;
      font-size: 2rem;
      color: #FFD700;
      margin-bottom: 20px;
    }

    .shop-item {
      background: rgba(0,0,0,0.5);
      padding: 20px;
      margin-bottom: 15px;
      border: 3px solid #444;
    }

    .shop-item-name {
      font-family: 'VT323', monospace;
      font-size: 1.5rem;
      color: #fff;
      margin-bottom: 10px;
    }

    .shop-item-cost {
      font-family: 'VT323', monospace;
      font-size: 1.2rem;
      color: #FFAA00;
      margin-bottom: 15px;
    }

    .shop-buttons {
      display: flex;
      gap: 10px;
      justify-content: center;
    }

    /* é‡Œç¨‹ç¢‘é¢æ¿ */
    .milestone-panel {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.85);
      z-index: 300;
      justify-content: center;
      align-items: center;
    }

    .milestone-panel.active {
      display: flex;
    }

    .milestone-card {
      background: linear-gradient(180deg, #3a3a3a 0%, #2a2a2a 100%);
      border: 8px solid;
      border-color: #6a6a6a #3a3a3a #3a3a3a #6a6a6a;
      padding: 40px;
      text-align: center;
      max-width: 450px;
      position: relative;
      animation: milestoneAppear 0.5s ease;
    }

    @keyframes milestoneAppear {
      0% { transform: scale(0.5) rotateY(90deg); opacity: 0; }
      100% { transform: scale(1) rotateY(0deg); opacity: 1; }
    }

    .milestone-badge {
      font-size: 4rem;
      margin-bottom: 15px;
      animation: milestoneBounce 0.6s ease infinite alternate;
    }

    @keyframes milestoneBounce {
      0% { transform: scale(1); }
      100% { transform: scale(1.1); }
    }

    .milestone-title {
      font-family: 'VT323', monospace;
      font-size: 2.5rem;
      color: #FFD700;
      text-shadow: 3px 3px 0 #8B6914;
      margin-bottom: 10px;
    }

    .milestone-desc {
      font-family: 'VT323', monospace;
      font-size: 1.5rem;
      color: #AAAAAA;
      margin-bottom: 25px;
    }

    .milestone-reward {
      font-family: 'VT323', monospace;
      font-size: 1.3rem;
      color: #55FF55;
      background: rgba(0,0,0,0.5);
      padding: 10px 20px;
      margin-bottom: 25px;
      border: 3px solid #55FF55;
    }

    /* 3D ç­‰è·æ–¹å¡Šå®¹å™¨ */
    .isometric-block-container {
      width: 150px;
      height: 150px;
      margin: 0 auto 20px;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    /* 3D ç­‰è·æ–¹å¡ŠåŸºç¤ */
    .isometric-block {
      position: relative;
      width: 80px;
      height: 80px;
      transform-style: preserve-3d;
      transform: rotateX(-30deg) rotateY(45deg);
    }

    .iso-face {
      position: absolute;
      width: 80px;
      height: 80px;
      border: 3px solid rgba(0,0,0,0.3);
    }

    .iso-top {
      transform: rotateX(90deg) translateZ(40px);
    }

    .iso-front {
      transform: translateZ(40px);
    }

    .iso-right {
      transform: rotateY(90deg) translateZ(40px);
    }

    /* é¤…ä¹¾æ–¹å¡Š */
    .cookie-block .iso-top {
      background: linear-gradient(135deg, #D4A574 0%, #C49464 50%, #B48454 100%);
    }
    .cookie-block .iso-front {
      background: linear-gradient(180deg, #C49464 0%, #A47444 100%);
    }
    .cookie-block .iso-right {
      background: linear-gradient(180deg, #B48454 0%, #946434 100%);
    }
    .cookie-block .iso-top::before,
    .cookie-block .iso-front::before {
      content: '';
      position: absolute;
      width: 12px;
      height: 12px;
      background: #5D4037;
      border-radius: 50%;
    }
    .cookie-block .iso-top::before {
      top: 15px;
      left: 20px;
      box-shadow: 30px 10px 0 #5D4037, 15px 35px 0 #5D4037, 45px 40px 0 #5D4037;
    }
    .cookie-block .iso-front::before {
      top: 20px;
      left: 15px;
      box-shadow: 35px 5px 0 #5D4037, 20px 35px 0 #5D4037;
    }

    /* é‘½çŸ³æ–¹å¡Š */
    .diamond-block .iso-top {
      background: linear-gradient(135deg, #7FDBFF 0%, #4FC3F7 30%, #29B6F6 70%, #0288D1 100%);
    }
    .diamond-block .iso-front {
      background: linear-gradient(180deg, #4FC3F7 0%, #0288D1 50%, #01579B 100%);
    }
    .diamond-block .iso-right {
      background: linear-gradient(180deg, #29B6F6 0%, #0277BD 50%, #01579B 100%);
    }
    .diamond-block .iso-top::before,
    .diamond-block .iso-front::before,
    .diamond-block .iso-right::before {
      content: '';
      position: absolute;
      background: rgba(255,255,255,0.6);
    }
    .diamond-block .iso-top::before {
      top: 10px;
      left: 10px;
      width: 25px;
      height: 8px;
      transform: rotate(-45deg);
    }
    .diamond-block .iso-front::before {
      top: 15px;
      left: 12px;
      width: 20px;
      height: 6px;
    }
    .diamond-block .iso-right::before {
      top: 20px;
      left: 15px;
      width: 15px;
      height: 5px;
    }
    /* é‘½çŸ³é–ƒå…‰ */
    .diamond-block::after {
      content: 'âœ¦';
      position: absolute;
      top: -20px;
      right: -10px;
      font-size: 1.5rem;
      color: #fff;
      text-shadow: 0 0 10px #7FDBFF;
      animation: sparkle 1s ease-in-out infinite;
    }
    @keyframes sparkle {
      0%, 100% { opacity: 0.5; transform: scale(0.8); }
      50% { opacity: 1; transform: scale(1.2); }
    }

    /* æ˜Ÿæ˜Ÿæ–¹å¡Š */
    .star-block .iso-top {
      background: linear-gradient(135deg, #FFE135 0%, #FFD700 50%, #FFC107 100%);
    }
    .star-block .iso-front {
      background: linear-gradient(180deg, #FFD700 0%, #FFA000 50%, #FF8F00 100%);
    }
    .star-block .iso-right {
      background: linear-gradient(180deg, #FFC107 0%, #FF8F00 50%, #E65100 100%);
    }
    .star-block::before {
      content: 'â˜…';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) rotateX(30deg) rotateY(-45deg);
      font-size: 3rem;
      color: #FFF8E1;
      text-shadow: 0 0 15px #FFD700;
      z-index: 10;
    }

    /* ç«ç„°æ–¹å¡Šï¼ˆé€£æ“Šç”¨ï¼‰ */
    .fire-block .iso-top {
      background: linear-gradient(135deg, #FFAB00 0%, #FF6F00 50%, #E65100 100%);
    }
    .fire-block .iso-front {
      background: linear-gradient(180deg, #FF6F00 0%, #E65100 50%, #BF360C 100%);
    }
    .fire-block .iso-right {
      background: linear-gradient(180deg, #F4511E 0%, #BF360C 50%, #870000 100%);
    }
    .fire-block::before {
      content: 'ğŸ”¥';
      position: absolute;
      top: -35px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 2.5rem;
      animation: fireFlicker 0.3s ease-in-out infinite alternate;
      z-index: 10;
    }
    @keyframes fireFlicker {
      0% { transform: translateX(-50%) scale(1) rotate(-5deg); }
      100% { transform: translateX(-50%) scale(1.1) rotate(5deg); }
    }

    /* ç¶ å¯¶çŸ³æ–¹å¡Šï¼ˆç¶“é©—å€¼ç”¨ï¼‰ */
    .emerald-block .iso-top {
      background: linear-gradient(135deg, #69F0AE 0%, #00E676 50%, #00C853 100%);
    }
    .emerald-block .iso-front {
      background: linear-gradient(180deg, #00E676 0%, #00C853 50%, #00A040 100%);
    }
    .emerald-block .iso-right {
      background: linear-gradient(180deg, #00C853 0%, #00A040 50%, #007030 100%);
    }
    .emerald-block .iso-top::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) rotate(45deg);
      width: 30px;
      height: 30px;
      background: rgba(255,255,255,0.3);
      border: 2px solid rgba(255,255,255,0.5);
    }

    /* ç´…çŸ³æ–¹å¡Šï¼ˆå®Œç¾æ­£ç¢ºç‡ç”¨ï¼‰ */
    .redstone-block .iso-top {
      background: linear-gradient(135deg, #FF5252 0%, #F44336 50%, #D32F2F 100%);
    }
    .redstone-block .iso-front {
      background: linear-gradient(180deg, #F44336 0%, #D32F2F 50%, #B71C1C 100%);
    }
    .redstone-block .iso-right {
      background: linear-gradient(180deg, #E53935 0%, #C62828 50%, #8B0000 100%);
    }
    .redstone-block::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 40px;
      height: 40px;
      background: radial-gradient(circle, #FF0000 0%, transparent 70%);
      transform: translate(-50%, -50%);
      animation: redstoneGlow 1s ease-in-out infinite;
      z-index: 5;
    }
    @keyframes redstoneGlow {
      0%, 100% { opacity: 0.5; transform: translate(-50%, -50%) scale(1); }
      50% { opacity: 1; transform: translate(-50%, -50%) scale(1.3); }
    }

    /* é’é‡‘çŸ³æ–¹å¡Šï¼ˆç¸½é¡Œæ•¸ç”¨ï¼‰ */
    .lapis-block .iso-top {
      background: linear-gradient(135deg, #5C6BC0 0%, #3F51B5 50%, #303F9F 100%);
    }
    .lapis-block .iso-front {
      background: linear-gradient(180deg, #3F51B5 0%, #303F9F 50%, #1A237E 100%);
    }
    .lapis-block .iso-right {
      background: linear-gradient(180deg, #3949AB 0%, #283593 50%, #1A237E 100%);
    }
    .lapis-block .iso-top::before,
    .lapis-block .iso-front::before {
      content: '';
      position: absolute;
      width: 10px;
      height: 10px;
      background: #7986CB;
      border-radius: 2px;
    }
    .lapis-block .iso-top::before {
      top: 12px;
      left: 18px;
      box-shadow: 25px 8px 0 #9FA8DA, 10px 30px 0 #7986CB, 38px 28px 0 #9FA8DA;
    }
    .lapis-block .iso-front::before {
      top: 15px;
      left: 22px;
      box-shadow: 20px 15px 0 #9FA8DA, 8px 38px 0 #7986CB;
    }

    /* å®Œæˆæ‰€æœ‰é¡Œç›®ç”¨ - ä¿¡æ¨™æ–¹å¡Š */
    .beacon-block .iso-top {
      background: linear-gradient(135deg, #E0F7FA 0%, #80DEEA 50%, #4DD0E1 100%);
    }
    .beacon-block .iso-front {
      background: linear-gradient(180deg, #4DD0E1 0%, #00ACC1 50%, #00838F 100%);
    }
    .beacon-block .iso-right {
      background: linear-gradient(180deg, #26C6DA 0%, #0097A7 50%, #006064 100%);
    }
    .beacon-block::before {
      content: '';
      position: absolute;
      top: -60px;
      left: 50%;
      transform: translateX(-50%);
      width: 20px;
      height: 80px;
      background: linear-gradient(180deg, transparent 0%, #80DEEA 50%, #4DD0E1 100%);
      opacity: 0.8;
      animation: beaconBeam 1.5s ease-in-out infinite;
    }
    @keyframes beaconBeam {
      0%, 100% { opacity: 0.5; height: 80px; }
      50% { opacity: 0.9; height: 100px; }
    }
    .beacon-block::after {
      content: 'âœ§';
      position: absolute;
      top: -70px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 1.5rem;
      color: #fff;
      text-shadow: 0 0 10px #80DEEA;
      animation: sparkle 0.8s ease-in-out infinite;
    }

    /* é€²åº¦æ¢ */
    .progress-section {
      margin-top: 20px;
    }

    .progress-bar-container {
      background: #1a1a1a;
      border: 3px solid #0a0a0a;
      height: 20px;
      position: relative;
      margin-top: 10px;
    }

    .progress-bar-fill {
      height: 100%;
      background: linear-gradient(180deg, #55FF55 0%, #33AA33 50%, #228822 50%, #116611 100%);
      transition: width 0.3s ease;
    }

    .progress-label {
      font-family: 'VT323', monospace;
      color: #888;
      font-size: 1.1rem;
      display: flex;
      justify-content: space-between;
    }

    /* æŒ‰éˆ•å®¹å™¨ */
    .button-row {
      display: flex;
      gap: 10px;
      justify-content: center;
      flex-wrap: wrap;
    }

    .next-btn {
      display: none;
    }

    .next-btn.visible {
      display: inline-block;
    }

    @media (max-width: 600px) {
      h1 { font-size: 2rem; }
      .question-word { font-size: 2.5rem; }
      .mc-input { width: 100%; }
      .stat-item { font-size: 1.1rem; }
      .milestone-card { padding: 25px; margin: 15px; }
      .isometric-block-container { width: 120px; height: 120px; }
      .isometric-block { width: 60px; height: 60px; }
      .iso-face { width: 60px; height: 60px; }
      .iso-top { transform: rotateX(90deg) translateZ(30px); }
      .iso-front { transform: translateZ(30px); }
      .iso-right { transform: rotateY(90deg) translateZ(30px); }
    }
  </style>
</head>
<body>
  <!-- æ¼¸å±¤èƒŒæ™¯ -->
  <div class="gradient-bg"></div>
  
  <!-- è£é£¾æ–¹å¡Š -->
  <div class="background-blocks" id="bgBlocks"></div>

  <!-- å…¨è¢å¹•æŒ‰éˆ• -->
  <button class="fullscreen-btn" onclick="toggleFullscreen()" title="å…¨è¢å¹•">â›¶</button>

  <!-- ä¸»éŠæˆ²å®¹å™¨ -->
  <div class="game-wrapper">
    <!-- éŠæˆ²é¢æ¿ -->
    <div class="game-panel" id="gamePanel">
      <h1>â›ï¸ Minecraft è©èªæŒ–ç¤¦ â›ï¸</h1>

      <!-- ç‹€æ…‹åˆ— -->
      <div class="status-bar">
        <div class="stat-group">
          <div class="level-badge">é—œå¡ <span id="level">1</span>/10</div>
          <div class="stat-item">
            <span class="icon">ğŸ”¥</span>
            <span id="combo">0</span> é€£æ“Š
          </div>
        </div>
        <div class="stat-group">
          <div class="stat-item">
            <span class="icon">ğŸª</span>
            <span id="cookies">5</span>
          </div>
          <div class="stat-item">
            <span class="icon">ğŸ’</span>
            <span id="diamonds">0</span>
          </div>
          <div class="stat-item">
            <span class="icon">â­</span>
            <span id="stars">0</span>
          </div>
        </div>
        <div class="hearts-container" id="hearts">
          <span class="heart">â¤ï¸</span>
          <span class="heart">â¤ï¸</span>
          <span class="heart">â¤ï¸</span>
        </div>
      </div>

      <!-- XP æ¢ -->
      <div class="xp-container">
        <div class="xp-bar-bg">
          <div class="xp-bar" id="xpBar" style="width: 0%"></div>
          <div class="xp-text">XP: <span id="xpText">0</span></div>
        </div>
      </div>

      <!-- é¡Œç›®å€ -->
      <div class="question-area">
        <div class="question-label">ç¬¬ <span id="questionNum">1</span> / <span id="totalQuestions">100</span> é¡Œ</div>
        <div class="question-word" id="questionWord">æº–å‚™é–‹å§‹</div>
      </div>

      <!-- è¼¸å…¥å€ -->
      <div class="input-area">
        <input type="text" class="mc-input" id="answerInput" placeholder="è¼¸å…¥è©èª..." autocomplete="off">
        <button class="mc-btn primary" id="submitBtn" onclick="submitAnswer()">â›ï¸ æŒ–æ˜ï¼</button>
        <button class="mc-btn skip-btn" onclick="openShop()">ğŸª è·³é</button>
        <button class="mc-btn primary next-btn" id="nextBtn" onclick="nextQuestion()">â¡ï¸ ä¸‹ä¸€é¡Œ</button>
      </div>

      <!-- çµ±è¨ˆè³‡è¨Š -->
      <div class="stats-row">
        <div class="stat-box">
          <div class="label">æ­£ç¢º</div>
          <div class="value correct" id="correctCount">0</div>
        </div>
        <div class="stat-box">
          <div class="label">éŒ¯èª¤</div>
          <div class="value wrong" id="wrongCount">0</div>
        </div>
        <div class="stat-box">
          <div class="label">ç•¥é</div>
          <div class="value skipped" id="skippedCount">0</div>
        </div>
        <div class="stat-box">
          <div class="label">æ­£ç¢ºç‡</div>
          <div class="value" id="accuracy">0%</div>
        </div>
      </div>

      <!-- é€²åº¦æ¢ -->
      <div class="progress-section">
        <div class="progress-label">
          <span>é€²åº¦</span>
          <span id="progressText">0%</span>
        </div>
        <div class="progress-bar-container">
          <div class="progress-bar-fill" id="progressBar" style="width: 0%"></div>
        </div>
      </div>

      <!-- é€£æ“Šé¡¯ç¤º -->
      <div class="combo-display" id="comboDisplay"></div>
    </div>

    <!-- çµç®—é¢æ¿ -->
    <div class="game-over-panel" id="gameOverPanel">
      <h2 class="result-title" id="resultTitle">ğŸ‰ æŒ–ç¤¦å®Œæˆï¼</h2>
      <div class="result-stats">
        <div class="result-stat">
          <div class="label">æ­£ç¢ºé¡Œæ•¸</div>
          <div class="value" id="finalCorrect">0</div>
        </div>
        <div class="result-stat">
          <div class="label">éŒ¯èª¤é¡Œæ•¸</div>
          <div class="value" id="finalWrong">0</div>
        </div>
        <div class="result-stat">
          <div class="label">ç•¥éé¡Œæ•¸</div>
          <div class="value" id="finalSkipped">0</div>
        </div>
        <div class="result-stat">
          <div class="label">æ­£ç¢ºç‡</div>
          <div class="value" id="finalAccuracy">0%</div>
        </div>
        <div class="result-stat">
          <div class="label">æœ€é«˜é€£æ“Š</div>
          <div class="value" id="finalCombo">0</div>
        </div>
        <div class="result-stat">
          <div class="label">ç¸½ç¶“é©—å€¼</div>
          <div class="value" id="finalXP">0</div>
        </div>
      </div>
      <button class="mc-btn primary" onclick="restartGame()">ğŸ”„ å†ç©ä¸€æ¬¡</button>
    </div>
  </div>

  <!-- å•†åº—é¢æ¿ -->
  <div class="shop-panel" id="shopPanel">
    <div class="shop-content">
      <div class="shop-title">ğŸª ç¤¦å·¥å•†åº—</div>
      <div class="shop-item">
        <div class="shop-item-name">â­ï¸ è·³éæ­¤é¡Œ</div>
        <div class="shop-item-cost">èŠ±è²»ï¼šğŸª Ã— 3</div>
        <div class="shop-buttons">
          <button class="mc-btn primary" onclick="useSkip()">ç¢ºèªè³¼è²·</button>
          <button class="mc-btn" onclick="closeShop()">å–æ¶ˆ</button>
        </div>
      </div>
      <p style="color: #888; margin-top: 15px; font-family: 'VT323', monospace;">
        ç›®å‰æ“æœ‰ï¼šğŸª Ã— <span id="shopCookies">5</span>
      </p>
    </div>
  </div>

  <!-- é‡Œç¨‹ç¢‘é¢æ¿ -->
  <div class="milestone-panel" id="milestonePanel">
    <div class="milestone-card">
      <div class="isometric-block-container" id="milestoneBlockContainer">
        <!-- 3D æ–¹å¡Šæœƒå‹•æ…‹æ’å…¥é€™è£¡ -->
      </div>
      <div class="milestone-title" id="milestoneTitle">é‡Œç¨‹ç¢‘é”æˆï¼</div>
      <div class="milestone-desc" id="milestoneDesc">æè¿°</div>
      <div class="milestone-reward" id="milestoneReward">çå‹µå…§å®¹</div>
      <button class="mc-btn primary" onclick="closeMilestone()">ç¹¼çºŒæŒ–ç¤¦ï¼</button>
    </div>
  </div>

  <script>
    // è©åº« - 50å€‹äºŒå­—è©èª
    const twoCharWords = [
      "è¬¹æ…", "è¬™è™›", "æ•æ·", "çŒ¶è±«", "èª ä¿¡",
      "å‹¤å‹‰", "å …éŸŒ", "æº«é¦¨", "ç‡¦çˆ›", "æ†‚é¬±",
      "ç†±å¿±", "å†·æ¼ ", "å–„è‰¯", "é‚ªæƒ¡", "å‹‡æ•¢",
      "è†½æ€¯", "è°ç©", "æ„šæ˜§", "å„ªé›…", "ç²—é­¯",
      "å¯§éœ", "å–§é¬§", "ç¹è¯", "è•­æ¢", "æ­¡æ¬£",
      "å“€å‚·", "æ˜äº®", "é™°æš—", "ç”œèœœ", "è‹¦æ¾€",
      "è¼•ç›ˆ", "æ²‰é‡", "è¿…é€Ÿ", "ç·©æ…¢", "å¯¬å»£",
      "ç‹¹çª„", "é«˜è³", "ä½çŸ®", "å …å›º", "è„†å¼±",
      "è±å¯Œ", "è²§ä¹", "æ–°ç©", "é™³èˆŠ", "ç²¾ç·»",
      "ç²—ç³™", "æ¸…æ¾ˆ", "æ¸¾æ¿", "èŠ¬èŠ³", "æƒ¡è‡­"
    ];

    // è©åº« - 50å€‹ä¸‰å­—è©èª
    const threeCharWords = [
      "ç¶ æ²¹æ²¹", "äº®æ™¶æ™¶", "æ‡¶æ´‹æ´‹", "äº‚ç³Ÿç³Ÿ", "æ…¢åå",
      "éœæ‚„æ‚„", "ç¬‘å˜»å˜»", "èˆˆæ²–æ²–", "å†·å†°å†°", "ç†±å‘¼å‘¼",
      "æš–æ´‹æ´‹", "å†·é¢¼é¢¼", "ç”œèœœèœœ", "é…¸æºœæºœ", "è‹¦å“ˆå“ˆ",
      "è»Ÿç¶¿ç¶¿", "ç¡¬é‚¦é‚¦", "è¼•é£„é£„", "æ²‰ç”¸ç”¸", "èƒ–å˜Ÿå˜Ÿ",
      "ç˜¦å·´å·´", "ç™½èŒ«èŒ«", "é»‘æ¼†æ¼†", "ç´…é€šé€š", "é»ƒæ¾„æ¾„",
      "æ¯›èŒ¸èŒ¸", "æ»‘æºœæºœ", "ç²—ç³™ç³™", "é«’å…®å…®", "é¦™å™´å™´",
      "è‡­çƒ˜çƒ˜", "æ¿•ç­”ç­”", "ä¹¾å·´å·´", "äº®å ‚å ‚", "é™°æ£®æ£®",
      "çœ¼çœçœ", "æ€¥åŒ†åŒ†", "æ°£å‘¼å‘¼", "æ¨‚é™¶é™¶", "å“­å•¼å•¼",
      "è¡€æ·‹æ·‹", "å…‰ç¦¿ç¦¿", "æ°´æ±ªæ±ª", "æ·šæ±ªæ±ª", "ç¾ç­”ç­”",
      "æ€’æ²–æ²–", "å–œæ´‹æ´‹", "æ‚²åˆ‡åˆ‡", "å‚»æ„£æ„£", "æ´»ç”Ÿç”Ÿ"
    ];

    // åˆä½µè©åº«
    const wordBank = [...twoCharWords, ...threeCharWords];

    // éŠæˆ²ç‹€æ…‹
    let gameState = {
      currentLevel: 1,
      totalLevels: 10,
      questionsPerLevel: 10,
      currentQuestion: 0,
      totalQuestions: 100,
      combo: 0,
      maxCombo: 0,
      cookies: 5,
      lives: 3,
      maxLives: 3,
      xp: 0,
      correct: 0,
      wrong: 0,
      skipped: 0,
      diamonds: 0,
      stars: 0,
      currentWord: "",
      answered: false,
      shuffledWords: []
    };

    // é‡Œç¨‹ç¢‘è¨­å®š
    const milestones = {
      cookies: [10, 25, 50],
      diamonds: [3, 6, 10],
      stars: [20, 50, 80],
      combo: [5, 10, 20]
    };

    let achievedMilestones = {
      cookies: [],
      diamonds: [],
      stars: [],
      combo: []
    };

    // åˆå§‹åŒ–
    function init() {
      // æ´—ç‰Œè©åº«
      gameState.shuffledWords = shuffleArray([...wordBank]);
      gameState.totalQuestions = gameState.shuffledWords.length;
      gameState.questionsPerLevel = Math.ceil(gameState.totalQuestions / gameState.totalLevels);
      
      createBackgroundBlocks();
      nextQuestion();

      // Enter éµæäº¤
      document.getElementById('answerInput').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
          if (gameState.answered) {
            nextQuestion();
          } else {
            submitAnswer();
          }
        }
      });

      // é˜²æ­¢è¤‡è£½é¡Œç›®
      document.addEventListener('copy', (e) => e.preventDefault());
      document.addEventListener('cut', (e) => e.preventDefault());
      document.addEventListener('contextmenu', (e) => {
        if (e.target.classList.contains('question-word')) {
          e.preventDefault();
        }
      });

      // ç¦æ­¢æ‹–æ›³é¸å–
      document.getElementById('questionWord').addEventListener('selectstart', (e) => e.preventDefault());
      document.getElementById('questionWord').addEventListener('dragstart', (e) => e.preventDefault());

      // ç¦æ­¢ Ctrl+C
      document.addEventListener('keydown', (e) => {
        if (e.ctrlKey && e.key === 'c') {
          const selection = window.getSelection().toString();
          if (selection && document.getElementById('questionWord').textContent.includes(selection)) {
            e.preventDefault();
          }
        }
      });
    }

    // Fisher-Yates æ´—ç‰Œ
    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    // å‰µå»ºèƒŒæ™¯è£é£¾æ–¹å¡Š
    function createBackgroundBlocks() {
      const container = document.getElementById('bgBlocks');
      const blockTypes = ['dirt', 'stone', 'grass', 'ore'];
      
      for (let i = 0; i < 15; i++) {
        const block = document.createElement('div');
        block.className = `floating-block ${blockTypes[Math.floor(Math.random() * blockTypes.length)]}`;
        block.style.left = `${Math.random() * 100}%`;
        block.style.top = `${Math.random() * 100}%`;
        block.style.animationDelay = `${Math.random() * 5}s`;
        block.style.transform = `scale(${0.5 + Math.random() * 0.8})`;
        container.appendChild(block);
      }
    }

    // ä¸‹ä¸€é¡Œ
    function nextQuestion() {
      if (gameState.currentQuestion >= gameState.totalQuestions) {
        endGame();
        return;
      }

      gameState.currentWord = gameState.shuffledWords[gameState.currentQuestion];
      gameState.currentQuestion++;
      gameState.currentLevel = Math.min(
        Math.ceil(gameState.currentQuestion / gameState.questionsPerLevel),
        gameState.totalLevels
      );
      gameState.answered = false;

      // é‡ç½®è¼¸å…¥æ¡†
      const input = document.getElementById('answerInput');
      input.value = '';
      input.className = 'mc-input';
      input.disabled = false;
      input.focus();

      // æ›´æ–°æŒ‰éˆ•é¡¯ç¤º
      document.getElementById('submitBtn').style.display = 'inline-block';
      document.getElementById('nextBtn').classList.remove('visible');

      updateDisplay();
      document.getElementById('questionWord').textContent = gameState.currentWord;
    }

    // æäº¤ç­”æ¡ˆ
    function submitAnswer() {
      if (gameState.answered) return;

      const input = document.getElementById('answerInput');
      const answer = input.value.trim();

      if (!answer) return;

      if (answer === gameState.currentWord) {
        // æ­£ç¢º
        gameState.correct++;
        gameState.combo++;
        gameState.stars++;
        if (gameState.combo > gameState.maxCombo) {
          gameState.maxCombo = gameState.combo;
        }

        // è¨ˆç®— XP
        const comboBonus = Math.min(gameState.combo, 10) * 2;
        const xpGain = 10 + comboBonus;
        gameState.xp += xpGain;

        // çå‹µé¤…ä¹¾ï¼ˆæ¯5é¡Œæ­£ç¢ºï¼‰
        if (gameState.correct % 5 === 0) {
          gameState.cookies++;
          showToast(`ğŸª ç²å¾—é¤…ä¹¾ï¼`);
        }

        // çå‹µé‘½çŸ³ï¼ˆæ¯10é¡Œæ­£ç¢ºï¼‰
        if (gameState.correct % 10 === 0) {
          gameState.diamonds++;
          showToast(`ğŸ’ ç²å¾—é‘½çŸ³ï¼`);
        }

        input.className = 'mc-input correct';
        gameState.answered = true;

        // é¡¯ç¤ºä¸‹ä¸€é¡ŒæŒ‰éˆ•
        document.getElementById('submitBtn').style.display = 'none';
        document.getElementById('nextBtn').classList.add('visible');
        input.disabled = true;

        // ç²’å­æ•ˆæœ
        createParticles('âœ“', '#55FF55');

        // æª¢æŸ¥é‡Œç¨‹ç¢‘
        checkMilestones();

      } else {
        // éŒ¯èª¤
        gameState.wrong++;
        gameState.combo = 0;
        gameState.lives--;

        input.className = 'mc-input wrong';
        createParticles('âœ—', '#FF5555');

        // æ„›å¿ƒå‹•ç•«
        const hearts = document.querySelectorAll('.heart');
        if (hearts[gameState.lives]) {
          hearts[gameState.lives].classList.add('damage');
          setTimeout(() => hearts[gameState.lives].classList.remove('damage'), 500);
        }

        // æª¢æŸ¥éŠæˆ²çµæŸ
        if (gameState.lives <= 0) {
          setTimeout(() => endGame(), 500);
          return;
        }

        // éŒ¯èª¤å¾Œæ¸…ç©ºè¼¸å…¥æ¡†è®“ç©å®¶é‡è©¦
        setTimeout(() => {
          input.className = 'mc-input';
          input.value = '';
          input.focus();
        }, 500);
      }

      updateDisplay();
    }

    // æ›´æ–°é¡¯ç¤º
    function updateDisplay() {
      document.getElementById('level').textContent = gameState.currentLevel;
      document.getElementById('combo').textContent = gameState.combo;
      document.getElementById('cookies').textContent = gameState.cookies;
      document.getElementById('diamonds').textContent = gameState.diamonds;
      document.getElementById('stars').textContent = gameState.stars;
      document.getElementById('xpText').textContent = gameState.xp;
      document.getElementById('questionNum').textContent = gameState.currentQuestion;
      document.getElementById('totalQuestions').textContent = gameState.totalQuestions;
      document.getElementById('correctCount').textContent = gameState.correct;
      document.getElementById('wrongCount').textContent = gameState.wrong;
      document.getElementById('skippedCount').textContent = gameState.skipped;

      // XP æ¢ï¼ˆæ¯100XPä¸€å€‹å¾ªç’°ï¼‰
      const xpPercent = (gameState.xp % 100);
      document.getElementById('xpBar').style.width = `${xpPercent}%`;

      // æ­£ç¢ºç‡
      const total = gameState.correct + gameState.wrong;
      const accuracy = total > 0 ? Math.round((gameState.correct / total) * 100) : 0;
      document.getElementById('accuracy').textContent = `${accuracy}%`;

      // é€²åº¦æ¢
      const progress = Math.round((gameState.currentQuestion / gameState.totalQuestions) * 100);
      document.getElementById('progressBar').style.width = `${progress}%`;
      document.getElementById('progressText').textContent = `${progress}%`;

      // æ„›å¿ƒæ›´æ–°
      updateHearts();

      // é€£æ“Šé¡¯ç¤º
      const comboDisplay = document.getElementById('comboDisplay');
      if (gameState.combo >= 2) {
        comboDisplay.textContent = `ğŸ”¥ ${gameState.combo} é€£æ“Šï¼`;
        comboDisplay.classList.add('active');
      } else {
        comboDisplay.classList.remove('active');
      }
    }

    // æ›´æ–°æ„›å¿ƒ
    function updateHearts() {
      const container = document.getElementById('hearts');
      container.innerHTML = '';
      for (let i = 0; i < gameState.maxLives; i++) {
        const heart = document.createElement('span');
        heart.className = `heart ${i < gameState.lives ? '' : 'empty'}`;
        heart.textContent = 'â¤ï¸';
        container.appendChild(heart);
      }
    }

    // å»ºç«‹ 3D æ–¹å¡Š HTML
    function create3DBlock(type) {
      return `
        <div class="isometric-block ${type}-block">
          <div class="iso-face iso-top"></div>
          <div class="iso-face iso-front"></div>
          <div class="iso-face iso-right"></div>
        </div>
      `;
    }

    // æª¢æŸ¥é‡Œç¨‹ç¢‘
    function checkMilestones() {
      // é¤…ä¹¾é‡Œç¨‹ç¢‘
      milestones.cookies.forEach(threshold => {
        if (gameState.cookies >= threshold && !achievedMilestones.cookies.includes(threshold)) {
          achievedMilestones.cookies.push(threshold);
          showMilestone('cookie', `ğŸª é¤…ä¹¾æ”¶è—å®¶`, `æ”¶é›†äº† ${threshold} å€‹é¤…ä¹¾ï¼`, `+${threshold} XP çå‹µ`);
          gameState.xp += threshold;
        }
      });

      // é‘½çŸ³é‡Œç¨‹ç¢‘
      milestones.diamonds.forEach(threshold => {
        if (gameState.diamonds >= threshold && !achievedMilestones.diamonds.includes(threshold)) {
          achievedMilestones.diamonds.push(threshold);
          showMilestone('diamond', `ğŸ’ é‘½çŸ³ç¤¦å·¥`, `æ”¶é›†äº† ${threshold} é¡†é‘½çŸ³ï¼`, `+${threshold * 10} XP çå‹µ`);
          gameState.xp += threshold * 10;
        }
      });

      // æ˜Ÿæ˜Ÿé‡Œç¨‹ç¢‘
      milestones.stars.forEach(threshold => {
        if (gameState.stars >= threshold && !achievedMilestones.stars.includes(threshold)) {
          achievedMilestones.stars.push(threshold);
          showMilestone('star', `â­ æ˜Ÿæ˜Ÿé”äºº`, `ç²å¾— ${threshold} é¡†æ˜Ÿæ˜Ÿï¼`, `+${threshold} XP çå‹µ`);
          gameState.xp += threshold;
        }
      });

      // é€£æ“Šé‡Œç¨‹ç¢‘
      milestones.combo.forEach(threshold => {
        if (gameState.combo >= threshold && !achievedMilestones.combo.includes(threshold)) {
          achievedMilestones.combo.push(threshold);
          showMilestone('fire', `ğŸ”¥ é€£æ“Šå¤§å¸«`, `é”æˆ ${threshold} é€£æ“Šï¼`, `+${threshold * 5} XP çå‹µ`);
          gameState.xp += threshold * 5;
        }
      });
    }

    // é¡¯ç¤ºé‡Œç¨‹ç¢‘
    function showMilestone(blockType, title, desc, reward) {
      const panel = document.getElementById('milestonePanel');
      const blockContainer = document.getElementById('milestoneBlockContainer');
      
      // æ’å…¥å°æ‡‰çš„ 3D æ–¹å¡Š
      blockContainer.innerHTML = create3DBlock(blockType);
      
      document.getElementById('milestoneTitle').textContent = title;
      document.getElementById('milestoneDesc').textContent = desc;
      document.getElementById('milestoneReward').textContent = reward;
      panel.classList.add('active');
    }

    // é—œé–‰é‡Œç¨‹ç¢‘
    function closeMilestone() {
      document.getElementById('milestonePanel').classList.remove('active');
      updateDisplay();
    }

    // é–‹å•Ÿå•†åº—
    function openShop() {
      document.getElementById('shopCookies').textContent = gameState.cookies;
      document.getElementById('shopPanel').classList.add('active');
    }

    // é—œé–‰å•†åº—
    function closeShop() {
      document.getElementById('shopPanel').classList.remove('active');
    }

    // ä½¿ç”¨è·³é
    function useSkip() {
      if (gameState.cookies < 3) {
        showToast('âŒ é¤…ä¹¾ä¸è¶³ï¼éœ€è¦ 3 å€‹é¤…ä¹¾');
        return;
      }

      gameState.cookies -= 3;
      gameState.skipped++;
      gameState.combo = 0;
      closeShop();
      updateDisplay();
      
      // æ¨™è¨˜ç‚ºå·²å›ç­”ï¼Œé€²å…¥ä¸‹ä¸€é¡Œ
      gameState.answered = true;
      document.getElementById('submitBtn').style.display = 'none';
      document.getElementById('nextBtn').classList.add('visible');
      document.getElementById('answerInput').disabled = true;
      
      showToast('â­ï¸ å·²è·³éæ­¤é¡Œ');
    }

    // éŠæˆ²çµæŸ
    function endGame() {
      document.getElementById('gamePanel').classList.add('hidden');
      document.getElementById('gameOverPanel').classList.add('active');

      const resultTitle = document.getElementById('resultTitle');
      if (gameState.lives <= 0) {
        resultTitle.textContent = 'ğŸ’€ éŠæˆ²çµæŸ';
        resultTitle.classList.add('fail');
      } else {
        resultTitle.textContent = 'ğŸ‰ æŒ–ç¤¦å®Œæˆï¼';
        resultTitle.classList.remove('fail');
      }

      document.getElementById('finalCorrect').textContent = gameState.correct;
      document.getElementById('finalWrong').textContent = gameState.wrong;
      document.getElementById('finalSkipped').textContent = gameState.skipped;
      document.getElementById('finalCombo').textContent = gameState.maxCombo;
      document.getElementById('finalXP').textContent = gameState.xp;

      const total = gameState.correct + gameState.wrong;
      const accuracy = total > 0 ? Math.round((gameState.correct / total) * 100) : 0;
      document.getElementById('finalAccuracy').textContent = `${accuracy}%`;
    }

    // é‡æ–°é–‹å§‹
    function restartGame() {
      gameState = {
        currentLevel: 1,
        totalLevels: 10,
        questionsPerLevel: 10,
        currentQuestion: 0,
        totalQuestions: 100,
        combo: 0,
        maxCombo: 0,
        cookies: 5,
        lives: 3,
        maxLives: 3,
        xp: 0,
        correct: 0,
        wrong: 0,
        skipped: 0,
        diamonds: 0,
        stars: 0,
        currentWord: "",
        answered: false,
        shuffledWords: []
      };

      achievedMilestones = {
        cookies: [],
        diamonds: [],
        stars: [],
        combo: []
      };

      // é‡æ–°æ´—ç‰Œ
      gameState.shuffledWords = shuffleArray([...wordBank]);
      gameState.totalQuestions = gameState.shuffledWords.length;
      gameState.questionsPerLevel = Math.ceil(gameState.totalQuestions / gameState.totalLevels);

      document.getElementById('gamePanel').classList.remove('hidden');
      document.getElementById('gameOverPanel').classList.remove('active');
      
      nextQuestion();
    }

    // ç²’å­æ•ˆæœ
    function createParticles(symbol, color) {
      for (let i = 0; i < 6; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        particle.textContent = symbol;
        particle.style.color = color;
        particle.style.left = `${50 + (Math.random() - 0.5) * 30}%`;
        particle.style.top = `${40 + (Math.random() - 0.5) * 20}%`;
        particle.style.animationDuration = `${0.8 + Math.random() * 0.4}s`;
        document.body.appendChild(particle);

        setTimeout(() => particle.remove(), 1200);
      }
    }

    // Toast é€šçŸ¥
    function showToast(message) {
      const existing = document.querySelector('.toast');
      if (existing) existing.remove();

      const toast = document.createElement('div');
      toast.className = 'toast';
      toast.textContent = message;
      document.body.appendChild(toast);

      setTimeout(() => toast.remove(), 2500);
    }

    // å…¨è¢å¹•åˆ‡æ›
    function toggleFullscreen() {
      if (!document.fullscreenElement) {
        document.documentElement.requestFullscreen();
      } else {
        document.exitFullscreen();
      }
    }

    // å•Ÿå‹•éŠæˆ²
    init();
  </script>
</body>
</html>
