<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>â›ï¸ Minecraft è©èªæŒ–ç¤¦ - äº”å¹´ç´šé€²éšç‰ˆ</title>
  <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap');
    
    * {
      box-sizing: border-box;
      image-rendering: pixelated;
    }

    :root {
      --mc-dark: #1a1a1a;
      --mc-stone: #7a7a7a;
      --mc-dirt: #8b6914;
      --mc-grass: #5d8c2e;
      --mc-green: #55ff55;
      --mc-red: #ff5555;
      --mc-gold: #ffaa00;
      --mc-aqua: #55ffff;
      --mc-white: #ffffff;
      --mc-gray: #aaaaaa;
      --mc-dark-gray: #555555;
    }

    body {
      font-family: 'VT323', 'Noto Sans TC', monospace;
      background: linear-gradient(180deg, #1e1e1e 0%, #000000 100%);
      color: var(--mc-white);
      margin: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      overflow-x: hidden;
    }

    #game-container {
      width: 95%;
      max-width: 600px;
      background: #c6c6c6;
      border: 6px solid;
      border-color: #ffffff #555555 #555555 #ffffff;
      padding: 20px;
      color: #373737;
      box-shadow: 0 20px 50px rgba(0,0,0,0.5);
      position: relative;
    }

    h1 {
      text-align: center;
      color: #373737;
      text-shadow: 2px 2px #fff;
      margin-top: 0;
      font-size: 2rem;
    }

    /* ç¶“é©—æ¢èˆ‡ç‹€æ…‹ */
    .status-bar {
      background: #373737;
      border: 3px solid #000;
      height: 24px;
      margin: 10px 0;
      position: relative;
      overflow: hidden;
    }
    .xp-fill {
      height: 100%;
      background: linear-gradient(180deg, #7dff7d 0%, #55cc55 50%, #338833 100%);
      width: 0%;
      transition: width 0.3s ease;
    }

    /* æ ¸å¿ƒé¡Œç›®å€ */
    .question-box {
      background: rgba(0,0,0,0.1);
      border: 4px inset #fff;
      padding: 30px 10px;
      text-align: center;
      margin: 20px 0;
      min-height: 120px;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    .question-word {
      font-size: 3.5rem;
      font-weight: bold;
      letter-spacing: 5px;
      color: #000;
      user-select: none;
      pointer-events: none;
    }

    /* è¼¸å…¥å€ */
    .input-area {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
    }

    input[type="text"] {
      flex: 1;
      padding: 12px;
      font-size: 1.5rem;
      font-family: 'Noto Sans TC';
      border: 4px solid #373737;
      background: #fff;
      outline: none;
    }

    /* Minecraft æŒ‰éˆ•é¢¨æ ¼ */
    .mc-btn {
      padding: 10px 20px;
      border: 4px solid;
      border-color: #8b8b8b #373737 #373737 #8b8b8b;
      background: #7a7a7a;
      color: white;
      cursor: pointer;
      font-family: 'VT323', 'Noto Sans TC';
      font-size: 1.2rem;
      text-shadow: 2px 2px #000;
    }
    .mc-btn:active {
      border-color: #373737 #8b8b8b #8b8b8b #373737;
      transform: translateY(2px);
    }
    .mc-btn.green { background: #55aa55; }
    .mc-btn.blue { background: #5555aa; }

    /* éœæ…‹ 3D çå‹µåœ–å¡æ¨£å¼ */
    .milestone-container {
      display: flex;
      justify-content: space-around;
      margin-top: 20px;
      background: #8b8b8b;
      padding: 15px;
      border: 4px inset #373737;
    }

    .milestone-item {
      width: 70px;
      height: 70px;
      background: rgba(0,0,0,0.2);
      border: 3px solid #555;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
    }

    .milestone-item.unlocked {
      background: radial-gradient(circle, #55ff5533 0%, #00000044 100%);
      border-color: var(--mc-gold);
    }

    /* éœæ…‹ 3D æ¨¡å‹æ¸²æŸ“å™¨ */
    .model-3d-static {
      width: 30px;
      height: 30px;
      position: relative;
      transform: rotateX(-20deg) rotateY(30deg);
      transform-style: preserve-3d;
      transition: transform 0.3s;
    }

    .cube-face {
      position: absolute;
      width: 30px;
      height: 30px;
      border: 1px solid rgba(0,0,0,0.1);
    }

    /* æ­£é¢ */
    .face-front { transform: translateZ(15px); }
    /* é ‚é¢ */
    .face-top { transform: rotateX(90deg) translateZ(15px); filter: brightness(1.2); }
    /* å´é¢ */
    .face-right { transform: rotateY(90deg) translateZ(15px); filter: brightness(0.7); }

    .locked-icon {
      font-size: 1.5rem;
      color: #555;
    }

    /* éš±è—é¢æ¿ */
    .hidden { display: none !important; }

    #end-panel {
      text-align: center;
    }
  </style>
</head>
<body>

<div id="game-container">
  <div id="game-panel">
    <h1>â›ï¸ è©èªæŒ–ç¤¦ (äº”å¹´ç´š)</h1>
    
    <div style="display: flex; justify-content: space-between; font-size: 1.2rem;">
      <span id="level-display">é—œå¡: 1/10</span>
      <span id="hp-display">â¤ï¸ â¤ï¸ â¤ï¸</span>
    </div>

    <div class="status-bar">
      <div id="xp-fill" class="xp-fill"></div>
    </div>

    <div class="question-box">
      <div id="target-word" class="question-word">è¼‰å…¥ä¸­...</div>
    </div>

    <div class="input-area">
      <input type="text" id="user-input" placeholder="è«‹è¼¸å…¥å°æ‡‰è©èª..." autocomplete="off">
      <button class="mc-btn green" onclick="checkAnswer()">æŒ–æ˜!</button>
    </div>

    <div style="display: flex; justify-content: space-between; align-items: center;">
      <div>
        ğŸª é¤…ä¹¾: <span id="cookie-count">5</span> 
        (é€£æ“Š <span id="combo-count">0</span>)
      </div>
      <button class="mc-btn blue" id="skip-btn" onclick="useSkip()">ä½¿ç”¨é¤…ä¹¾è·³é (-3)</button>
    </div>

    <div class="milestone-container" id="milestone-row">
      </div>
  </div>

  <div id="end-panel" class="hidden">
    <h1>æŒ–æ˜çµæŸ!</h1>
    <p id="final-stats" style="font-size: 1.2rem;"></p>
    <div class="milestone-container" id="final-rewards"></div>
    <br>
    <button class="mc-btn green" onclick="location.reload()">é‡æ–°æŒ‘æˆ°</button>
  </div>
</div>

<script>
// --- è©åº«è³‡æ–™ (100å€‹) ---
const twoCharWords = [
  "è¬¹æ…", "è¬™è™›", "æ•æ·", "çŒ¶è±«", "èª ä¿¡", "æ†§æ†¬", "å°·å°¬", "æ…šæ„§", "å‰›æ¯…", "å¯¬å®¹",
  "æ¾æ¹ƒ", "æ¸²æŸ“", "æ¯ç«­", "ç´°è†©", "æ¹›è—", "å¹½éœ", "ç¹ç‘£", "é¼é—Š", "é¡«æŠ–", "é™¶é†‰",
  "å¾˜å¾Š", "ç€è¦½", "é†é‡€", "å®åš€", "å¦¥å”", "ç«¶çˆ­", "å‹‰å‹µ", "è¦å¾‹", "ç¶­è­·", "é—œéµ",
  "é‚è¼¯", "åˆ¤æ–·", "åˆ†æ", "éˆæ„Ÿ", "å“è¶Š", "è³‡æ·±", "ç­–ç•¥", "æ•éŠ³", "é æ¸¬", "é ˜æ‚Ÿ",
  "è±¡å¾µ", "æ°¸æ†", "ç¯€å¥", "æ ¸å¿ƒ", "çµæ§‹", "èµ·æº", "éšœç¤™", "ä¾·é™", "å¹³è¡¡", "å’Œè«§"
];
const threeCharWords = [
  "ç¶ æ²¹æ²¹", "äº®æ™¶æ™¶", "æ‡¶æ´‹æ´‹", "äº‚ç³Ÿç³Ÿ", "å­¤é›¶é›¶", "æ…¢åå", "ä¹¾å·´å·´", "çšºå·´å·´", "ç¾ç­”ç­”", "éŸ¿å™¹å™¹",
  "æ²‰ç”¸ç”¸", "éœ§æ¿›æ¿›", "æ¿•æ¼‰æ¼‰", "å–œæ´‹æ´‹", "å¯†éº»éº»", "ç©ºç›ªç›ª", "è»Ÿç¶¿ç¶¿", "ç†±çƒ˜çƒ˜", "èˆˆæ²–æ²–", "éœæ‚„æ‚„",
  "çµ†è…³çŸ³", "æ•²é–€ç£š", "è©¦é‡‘çŸ³", "å°ç«ç·š", "é‡Œç¨‹ç¢‘", "ä¿è­·è‰²", "è«éæ˜¯", "æ²’æƒ³åˆ°", "å¿ä¸ä½", "å·®ä¸å¤š",
  "ä¸‹é¦¬å¨", "ç ´å¤©è’", "é–€å¤–æ¼¢", "æ“‹ç®­ç‰Œ", "é¦¬å¾Œç‚®", "è€³é‚Šé¢¨", "è€æ‰ç‰™", "æ¡ƒèŠ±æº", "é–‰é–€ç¾¹", "æ›¿ç½ªç¾Š",
  "å®šå¿ƒä¸¸", "æ½‘å†·æ°´", "ç‚’å†·é£¯", "èµ°éå ´", "æ‡‰è²èŸ²", "éµé£¯ç¢—", "è€èŠ±æ‹›", "æŒ‡æ®æ£’", "è½‰æŠ˜é»", "å£é ­ç¦ª"
];
const wordBank = [...twoCharWords, ...threeCharWords];

// --- éŠæˆ²ç‹€æ…‹ ---
let gameState = {
  shuffledWords: [],
  currentIndex: 0,
  hp: 3,
  cookies: 5,
  combo: 0,
  xp: 0,
  correctCount: 0,
  rewards: [
    { threshold: 30, type: 'cow', color: '#4b3b2f', name: 'ä¹³ç‰›', unlocked: false },
    { threshold: 60, type: 'creeper', color: '#55aa55', name: 'è‹¦åŠ›æ€•', unlocked: false },
    { threshold: 90, type: 'steve', color: '#2b90ff', name: 'å²æå¤«', unlocked: false },
    { threshold: 100, type: 'diamond', color: '#55ffff', name: 'é‘½çŸ³æ–¹å¡Š', unlocked: false }
  ]
};

// --- åˆå§‹åŒ– ---
function init() {
  gameState.shuffledWords = shuffle([...wordBank]);
  updateDisplay();
  renderMilestones();
  
  document.getElementById('user-input').addEventListener('keypress', (e) => {
    if (e.key === 'Enter') checkAnswer();
  });
}

function shuffle(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}

// --- æ ¸å¿ƒé‚è¼¯ ---
function checkAnswer() {
  const input = document.getElementById('user-input');
  const target = gameState.shuffledWords[gameState.currentIndex];
  
  if (input.value.trim() === target) {
    // æ­£ç¢º
    gameState.correctCount++;
    gameState.combo++;
    gameState.xp += (10 + gameState.combo * 2);
    if (gameState.combo % 5 === 0) gameState.cookies++;
    
    // æª¢æŸ¥çå‹µè§£é–
    const progress = (gameState.correctCount / wordBank.length) * 100;
    gameState.rewards.forEach(r => {
      if (progress >= r.threshold) r.unlocked = true;
    });

    nextQuestion();
  } else {
    // éŒ¯èª¤
    gameState.hp--;
    gameState.combo = 0;
    input.classList.add('wrong-shake');
    setTimeout(() => input.classList.remove('wrong-shake'), 400);
    if (gameState.hp <= 0) endGame();
  }
  
  input.value = "";
  updateDisplay();
}

function useSkip() {
  if (gameState.cookies >= 3) {
    gameState.cookies -= 3;
    nextQuestion();
    updateDisplay();
  }
}

function nextQuestion() {
  gameState.currentIndex++;
  if (gameState.currentIndex >= wordBank.length) {
    endGame();
  } else {
    document.getElementById('target-word').innerText = gameState.shuffledWords[gameState.currentIndex];
  }
}

// --- ç•«é¢æ›´æ–° ---
function updateDisplay() {
  document.getElementById('level-display').innerText = `é€²åº¦: ${gameState.currentIndex + 1}/${wordBank.length}`;
  document.getElementById('target-word').innerText = gameState.shuffledWords[gameState.currentIndex];
  document.getElementById('hp-display').innerText = "â¤ï¸ ".repeat(gameState.hp);
  document.getElementById('cookie-count').innerText = gameState.cookies;
  document.getElementById('combo-count').innerText = gameState.combo;
  
  const xpPercent = (gameState.currentIndex / wordBank.length) * 100;
  document.getElementById('xp-fill').style.width = xpPercent + "%";
  
  renderMilestones();
}

// ç”Ÿæˆ 3D çå‹µ HTML
function get3DModelHtml(config) {
  if (!config.unlocked) return `<div class="locked-icon">ğŸ”’</div>`;
  
  return `
    <div class="model-3d-static" title="${config.name}">
      <div class="cube-face face-front" style="background: ${config.color}"></div>
      <div class="cube-face face-top" style="background: ${config.color}"></div>
      <div class="cube-face face-right" style="background: ${config.color}"></div>
    </div>
  `;
}

function renderMilestones() {
  const row = document.getElementById('milestone-row');
  row.innerHTML = "";
  gameState.rewards.forEach(reward => {
    const div = document.createElement('div');
    div.className = `milestone-item ${reward.unlocked ? 'unlocked' : ''}`;
    div.innerHTML = get3DModelHtml(reward);
    row.appendChild(div);
  });
}

function endGame() {
  document.getElementById('game-panel').classList.add('hidden');
  document.getElementById('end-panel').classList.remove('hidden');
  document.getElementById('final-stats').innerText = `æ­£ç¢ºæŒ–åˆ°: ${gameState.correctCount} å€‹è©èª`;
  
  const finalRow = document.getElementById('final-rewards');
  finalRow.innerHTML = "";
  gameState.rewards.forEach(reward => {
    const div = document.createElement('div');
    div.className = `milestone-item ${reward.unlocked ? 'unlocked' : ''}`;
    div.innerHTML = get3DModelHtml(reward);
    finalRow.appendChild(div);
  });
}

window.onload = init;
</script>

</body>
</html>
