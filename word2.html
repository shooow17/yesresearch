<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>â›ï¸ Minecraft è©èªæŒ–ç¤¦</title>
  <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap');
    
    * {
      box-sizing: border-box;
      image-rendering: pixelated;
    }

    :root {
      --mc-dark: #1a1a1a;
      --mc-stone: #7a7a7a;
      --mc-dirt: #8b6914;
      --mc-grass: #5d8c2e;
      --mc-green: #55ff55;
      --mc-red: #ff5555;
      --mc-gold: #ffaa00;
      --mc-aqua: #55ffff;
      --mc-white: #ffffff;
      --mc-gray: #aaaaaa;
      --mc-dark-gray: #555555;
      --mc-brown: #654321;
    }

    body {
      font-family: 'VT323', 'Noto Sans TC', monospace;
      background: linear-gradient(180deg, #87ceeb 0%, #87ceeb 40%, #5d8c2e 40%, #5d8c2e 45%, #8b6914 45%, #8b6914 100%);
      min-height: 100vh;
      margin: 0;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .mc-btn {
      font-family: 'VT323', monospace;
      font-size: 1.2rem;
      padding: 8px 20px;
      border: 4px solid;
      border-color: #8b8b8b #373737 #373737 #8b8b8b;
      background: linear-gradient(180deg, #7a7a7a 0%, #5a5a5a 50%, #4a4a4a 50%, #3a3a3a 100%);
      color: var(--mc-white);
      cursor: pointer;
      text-shadow: 2px 2px 0 #3f3f3f;
      transition: all 0.1s;
      position: relative;
    }

    .mc-btn:hover {
      background: linear-gradient(180deg, #9a9a9a 0%, #7a7a7a 50%, #6a6a6a 50%, #5a5a5a 100%);
      color: #ffffaa;
    }

    .mc-btn:active {
      border-color: #373737 #8b8b8b #8b8b8b #373737;
      transform: translateY(2px);
    }

    .mc-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .mc-btn.green {
      background: linear-gradient(180deg, #5d8c2e 0%, #4a7024 50%, #3d5c1e 50%, #2d4416 100%);
      border-color: #7ab03a #2d4416 #2d4416 #7ab03a;
    }

    .mc-btn.green:hover {
      background: linear-gradient(180deg, #7ab03a 0%, #5d8c2e 50%, #4a7024 50%, #3d5c1e 100%);
    }

    .mc-btn.red {
      background: linear-gradient(180deg, #aa3333 0%, #882222 50%, #661919 50%, #441111 100%);
      border-color: #cc4444 #441111 #441111 #cc4444;
    }

    .mc-btn.gold {
      background: linear-gradient(180deg, #ddaa00 0%, #bb8800 50%, #996600 50%, #774400 100%);
      border-color: #ffcc00 #774400 #774400 #ffcc00;
    }

    .mc-btn.purple {
      background: linear-gradient(180deg, #9932cc 0%, #7b28a8 50%, #5d1e80 50%, #4a1866 100%);
      border-color: #bb44ee #4a1866 #4a1866 #bb44ee;
    }

    .mc-panel {
      background: rgba(0, 0, 0, 0.75);
      border: 4px solid;
      border-color: #5a5a5a #1a1a1a #1a1a1a #5a5a5a;
      padding: 20px;
      color: var(--mc-white);
      box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
    }

    h1 {
      font-family: 'VT323', monospace;
      font-size: 3rem;
      color: var(--mc-white);
      text-shadow: 
        4px 4px 0 #3f3f3f,
        -2px -2px 0 #000,
        2px -2px 0 #000,
        -2px 2px 0 #000;
      margin: 20px 0;
      letter-spacing: 2px;
    }

    .subtitle {
      font-size: 1.2rem;
      color: var(--mc-gray);
      text-shadow: 2px 2px 0 #000;
      margin-bottom: 20px;
    }

    .game-container {
      width: 100%;
      max-width: 800px;
    }

    .status-bar {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      justify-content: center;
      margin-bottom: 20px;
    }

    .stat-box {
      background: rgba(0, 0, 0, 0.8);
      border: 3px solid;
      border-color: #5a5a5a #2a2a2a #2a2a2a #5a5a5a;
      padding: 10px 15px;
      min-width: 100px;
      text-align: center;
    }

    .stat-label {
      font-size: 0.9rem;
      color: var(--mc-gray);
      text-shadow: 1px 1px 0 #000;
    }

    .stat-value {
      font-size: 1.5rem;
      color: var(--mc-white);
      text-shadow: 2px 2px 0 #000;
    }

    .stat-value.gold { color: var(--mc-gold); }
    .stat-value.green { color: var(--mc-green); }
    .stat-value.red { color: var(--mc-red); }
    .stat-value.aqua { color: var(--mc-aqua); }

    .hearts {
      display: flex;
      gap: 5px;
      justify-content: center;
      font-size: 1.8rem;
    }

    .heart {
      filter: drop-shadow(2px 2px 0 #000);
      transition: transform 0.2s;
    }

    .heart.lost {
      filter: grayscale(1) drop-shadow(2px 2px 0 #000);
      opacity: 0.4;
    }

    .heart.damage {
      animation: heartDamage 0.3s ease;
    }

    @keyframes heartDamage {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.3); filter: brightness(2) drop-shadow(2px 2px 0 #000); }
    }

    .xp-bar-container {
      width: 100%;
      height: 30px;
      background: #1a1a1a;
      border: 3px solid;
      border-color: #0a0a0a #3a3a3a #3a3a3a #0a0a0a;
      margin: 15px 0;
      position: relative;
      overflow: hidden;
    }

    .xp-bar {
      height: 100%;
      background: linear-gradient(180deg, #7dff7d 0%, #55cc55 50%, #44aa44 50%, #338833 100%);
      transition: width 0.5s ease;
      position: relative;
    }

    .xp-bar::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 50%;
      background: rgba(255,255,255,0.2);
    }

    .xp-text {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 1.2rem;
      color: var(--mc-white);
      text-shadow: 2px 2px 0 #000;
      z-index: 1;
    }

    .question-area {
      margin: 30px 0;
      text-align: center;
    }

    .question-label {
      font-size: 1.2rem;
      color: var(--mc-gray);
      margin-bottom: 10px;
      text-shadow: 2px 2px 0 #000;
    }

    .question-word {
      font-size: 4rem;
      color: var(--mc-gold);
      text-shadow: 
        4px 4px 0 #553300,
        -2px -2px 0 #000,
        2px -2px 0 #000,
        -2px 2px 0 #000;
      margin: 20px 0;
      letter-spacing: 8px;
      min-height: 80px;
      display: flex;
      align-items: center;
      justify-content: center;
      animation: float 2s ease-in-out infinite;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
      -webkit-touch-callout: none;
      pointer-events: none;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    .input-area {
      display: flex;
      gap: 10px;
      justify-content: center;
      flex-wrap: wrap;
    }

    .mc-input {
      font-family: 'VT323', 'Noto Sans TC', monospace;
      font-size: 2rem;
      padding: 10px 20px;
      background: #000;
      border: 3px solid;
      border-color: #1a1a1a #5a5a5a #5a5a5a #1a1a1a;
      color: var(--mc-white);
      text-align: center;
      width: 300px;
      outline: none;
    }

    .mc-input:focus {
      border-color: #3a3a3a #7a7a7a #7a7a7a #3a3a3a;
      box-shadow: 0 0 10px rgba(85, 255, 85, 0.5);
    }

    .mc-input.correct {
      color: var(--mc-green);
      animation: correctPulse 0.5s ease;
    }

    .mc-input.wrong {
      color: var(--mc-red);
      animation: wrongShake 0.5s ease;
    }

    @keyframes correctPulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }

    @keyframes wrongShake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-10px); }
      75% { transform: translateX(10px); }
    }

    .button-area {
      display: flex;
      gap: 15px;
      justify-content: center;
      margin-top: 20px;
      flex-wrap: wrap;
    }

    .inventory {
      display: flex;
      gap: 5px;
      justify-content: center;
      margin: 20px 0;
    }

    .inv-slot {
      width: 50px;
      height: 50px;
      background: #555;
      border: 3px solid;
      border-color: #333 #777 #777 #333;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
    }

    .inv-slot.selected {
      border-color: #fff;
      background: #666;
    }

    .inv-item {
      font-size: 1.8rem;
    }

    .inv-count {
      position: absolute;
      bottom: 2px;
      right: 4px;
      font-size: 0.9rem;
      color: var(--mc-white);
      text-shadow: 1px 1px 0 #000;
    }

    .combo-display {
      position: fixed;
      top: 20%;
      right: 10%;
      font-size: 2.5rem;
      color: var(--mc-gold);
      text-shadow: 3px 3px 0 #000;
      animation: comboFloat 0.5s ease;
      pointer-events: none;
    }

    @keyframes comboFloat {
      0% { transform: scale(0.5) translateY(20px); opacity: 0; }
      50% { transform: scale(1.2) translateY(-10px); }
      100% { transform: scale(1) translateY(0); opacity: 1; }
    }

    .toast {
      position: fixed;
      top: 80px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0, 0, 0, 0.9);
      border: 3px solid var(--mc-gold);
      padding: 15px 30px;
      color: var(--mc-white);
      font-size: 1.5rem;
      text-shadow: 2px 2px 0 #000;
      animation: toastSlide 3s ease forwards;
      z-index: 1000;
    }

    @keyframes toastSlide {
      0% { transform: translateX(-50%) translateY(-100px); opacity: 0; }
      10% { transform: translateX(-50%) translateY(0); opacity: 1; }
      80% { transform: translateX(-50%) translateY(0); opacity: 1; }
      100% { transform: translateX(-50%) translateY(-100px); opacity: 0; }
    }

    .end-screen {
      text-align: center;
      padding: 40px;
    }

    .end-title {
      font-size: 3rem;
      color: var(--mc-gold);
      text-shadow: 4px 4px 0 #553300;
      margin-bottom: 30px;
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      max-width: 400px;
      margin: 30px auto;
    }

    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.85);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      overflow-y: auto;
      padding: 20px;
    }

    .modal-content {
      max-width: 90%;
      width: 450px;
    }

    .modal-title {
      font-size: 2rem;
      color: var(--mc-gold);
      text-shadow: 2px 2px 0 #000;
      margin-bottom: 20px;
      text-align: center;
    }

    .shop-item {
      background: rgba(50, 50, 50, 0.8);
      border: 2px solid #555;
      padding: 15px;
      margin: 10px 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .shop-item-info {
      flex: 1;
    }

    .shop-item-name {
      font-size: 1.3rem;
      color: var(--mc-aqua);
    }

    .shop-item-desc {
      font-size: 1rem;
      color: var(--mc-gray);
    }

    .hidden {
      display: none !important;
    }

    .fullscreen-btn {
      position: fixed;
      top: 10px;
      right: 10px;
      z-index: 100;
    }

    .bg-blocks {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      pointer-events: none;
      overflow: hidden;
      z-index: -1;
    }

    .floating-block {
      position: absolute;
      width: 30px;
      height: 30px;
      opacity: 0.3;
      animation: floatBlock 8s ease-in-out infinite;
    }

    @keyframes floatBlock {
      0%, 100% { transform: translateY(0) rotate(0deg); }
      50% { transform: translateY(-30px) rotate(180deg); }
    }

    .particle {
      position: fixed;
      pointer-events: none;
      font-size: 1.5rem;
      animation: particleFly 1s ease forwards;
    }

    @keyframes particleFly {
      0% { transform: translateY(0) scale(1); opacity: 1; }
      100% { transform: translateY(-100px) scale(0.5); opacity: 0; }
    }

    .ground-info {
      width: 100%;
      max-width: 800px;
      margin-top: 30px;
      padding: 25px;
      background: linear-gradient(180deg, #5d8c2e 0%, #4a7024 5px, #8b6914 5px, #7a5a10 100%);
      border: 4px solid;
      border-color: #6d7d14 #3a2a08 #3a2a08 #6d7d14;
      box-shadow: inset 0 5px 15px rgba(0,0,0,0.3);
    }

    .ground-title {
      font-size: 1.8rem;
      color: var(--mc-gold);
      text-shadow: 3px 3px 0 #000;
      text-align: center;
      margin-bottom: 20px;
    }

    .item-info-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 15px;
    }

    .item-info-card {
      background: rgba(0, 0, 0, 0.6);
      border: 3px solid;
      border-color: #5a5a5a #2a2a2a #2a2a2a #5a5a5a;
      padding: 15px;
      display: flex;
      align-items: flex-start;
      gap: 12px;
    }

    .item-icon {
      font-size: 2.5rem;
      filter: drop-shadow(2px 2px 0 #000);
      min-width: 50px;
      text-align: center;
    }

    .item-details {
      flex: 1;
    }

    .item-name {
      font-size: 1.4rem;
      color: var(--mc-aqua);
      text-shadow: 2px 2px 0 #000;
      margin-bottom: 5px;
    }

    .item-desc {
      font-size: 1.1rem;
      color: var(--mc-gray);
      text-shadow: 1px 1px 0 #000;
      line-height: 1.4;
    }

    .item-desc .highlight {
      color: var(--mc-gold);
    }

    .item-desc .green {
      color: var(--mc-green);
    }

    .ore-decoration {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 20px;
      padding-top: 15px;
      border-top: 3px solid rgba(255,255,255,0.1);
    }

    .ore {
      width: 35px;
      height: 35px;
      border-radius: 3px;
      animation: oreGlow 2s ease-in-out infinite;
    }

    .ore.coal {
      background: linear-gradient(135deg, #3a3a3a 0%, #1a1a1a 100%);
      border: 2px solid #0a0a0a;
    }

    .ore.iron {
      background: linear-gradient(135deg, #d4c4a8 0%, #a89888 100%);
      border: 2px solid #887868;
    }

    .ore.gold-ore {
      background: linear-gradient(135deg, #ffe566 0%, #cc9900 100%);
      border: 2px solid #997700;
      animation-delay: 0.3s;
    }

    .ore.diamond-ore {
      background: linear-gradient(135deg, #4aedd9 0%, #1fb8a6 100%);
      border: 2px solid #1a9688;
      animation-delay: 0.6s;
    }

    .ore.emerald-ore {
      background: linear-gradient(135deg, #50c878 0%, #2e8b57 100%);
      border: 2px solid #228b22;
      animation-delay: 0.9s;
    }

    @keyframes oreGlow {
      0%, 100% { box-shadow: 0 0 5px rgba(255,255,255,0.2); }
      50% { box-shadow: 0 0 15px rgba(255,255,255,0.5); }
    }

    /* çå‹µé‡Œç¨‹ç¢‘ */
    .milestones {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin: 15px 0;
      flex-wrap: wrap;
    }

    .milestone {
      width: 50px;
      height: 50px;
      background: rgba(0,0,0,0.6);
      border: 3px solid #555;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      position: relative;
      opacity: 0.5;
      transition: all 0.3s;
    }

    .milestone.unlocked {
      opacity: 1;
      border-color: var(--mc-gold);
      animation: milestoneUnlock 0.5s ease;
    }

    .milestone.clickable {
      cursor: pointer;
    }

    .milestone.clickable:hover {
      transform: scale(1.1);
      box-shadow: 0 0 15px rgba(255, 170, 0, 0.5);
    }

    .milestone-label {
      position: absolute;
      bottom: -20px;
      font-size: 0.8rem;
      color: var(--mc-gray);
    }

    @keyframes milestoneUnlock {
      0% { transform: scale(1); }
      50% { transform: scale(1.3); }
      100% { transform: scale(1); }
    }

    /* çå‹µå¡ç‰‡å½ˆçª— */
    .reward-card-modal {
      width: 400px;
      max-width: 95%;
    }

    .reward-card {
      background: linear-gradient(180deg, #2d1f4e 0%, #1a1a2e 100%);
      border: 6px solid;
      border-image: linear-gradient(180deg, #ffd700, #ff8c00, #ffd700) 1;
      padding: 20px;
      position: relative;
      overflow: hidden;
    }

    .reward-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.03'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
      pointer-events: none;
    }

    .reward-card-header {
      text-align: center;
      margin-bottom: 15px;
    }

    .reward-card-title {
      font-size: 1.8rem;
      color: var(--mc-gold);
      text-shadow: 2px 2px 0 #000;
      margin-bottom: 5px;
    }

    .reward-card-subtitle {
      font-size: 1rem;
      color: var(--mc-aqua);
    }

    .reward-3d-container {
      width: 200px;
      height: 200px;
      margin: 20px auto;
      perspective: 500px;
    }

    .reward-3d-model {
      width: 100%;
      height: 100%;
      position: relative;
      transform-style: preserve-3d;
      animation: rotate3d 8s linear infinite;
    }

    @keyframes rotate3d {
      from { transform: rotateY(0deg); }
      to { transform: rotateY(360deg); }
    }

    .reward-stats {
      background: rgba(0,0,0,0.5);
      border: 2px solid #444;
      padding: 15px;
      margin: 15px 0;
    }

    .reward-stats-row {
      display: flex;
      justify-content: space-between;
      margin: 8px 0;
      font-size: 1.2rem;
    }

    .reward-stats-label {
      color: var(--mc-gray);
    }

    .reward-stats-value {
      color: var(--mc-white);
    }

    .reward-name-input {
      width: 100%;
      font-family: 'VT323', monospace;
      font-size: 1.5rem;
      padding: 10px;
      background: #000;
      border: 3px solid #555;
      color: var(--mc-gold);
      text-align: center;
      margin: 15px 0;
    }

    .reward-name-input:focus {
      border-color: var(--mc-gold);
      outline: none;
    }

    .reward-buttons {
      display: flex;
      gap: 10px;
      justify-content: center;
      flex-wrap: wrap;
    }

    /* 3D ä¹³ç‰›æ¨¡å‹ */
    .cow-3d {
      position: relative;
      width: 100%;
      height: 100%;
      transform-style: preserve-3d;
    }

    .cow-body {
      position: absolute;
      width: 80px;
      height: 50px;
      background: linear-gradient(90deg, #f5f5f5 0%, #e0e0e0 50%, #f5f5f5 100%);
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) translateZ(0);
      border: 2px solid #333;
    }

    .cow-body::before {
      content: '';
      position: absolute;
      width: 20px;
      height: 15px;
      background: #3d3d3d;
      top: 10px;
      left: 5px;
      border-radius: 3px;
    }

    .cow-body::after {
      content: '';
      position: absolute;
      width: 25px;
      height: 20px;
      background: #3d3d3d;
      bottom: 5px;
      right: 10px;
      border-radius: 3px;
    }

    .cow-head {
      position: absolute;
      width: 35px;
      height: 35px;
      background: linear-gradient(180deg, #f5f5f5 0%, #e8e8e8 100%);
      top: 35%;
      left: 10%;
      transform: translateZ(20px);
      border: 2px solid #333;
    }

    .cow-head::before {
      content: '';
      position: absolute;
      width: 25px;
      height: 15px;
      background: #ffcccc;
      bottom: 2px;
      left: 5px;
      border: 1px solid #333;
    }

    .cow-horn {
      position: absolute;
      width: 8px;
      height: 15px;
      background: #d4d4d4;
      border: 1px solid #333;
    }

    .cow-horn.left {
      top: -12px;
      left: 5px;
      transform: rotate(-10deg);
    }

    .cow-horn.right {
      top: -12px;
      right: 5px;
      transform: rotate(10deg);
    }

    .cow-leg {
      position: absolute;
      width: 12px;
      height: 30px;
      background: linear-gradient(180deg, #f5f5f5 70%, #3d3d3d 70%);
      border: 1px solid #333;
      bottom: -30px;
    }

    /* 3D è‹¦åŠ›æ€•æ¨¡å‹ */
    .creeper-3d {
      position: relative;
      width: 100%;
      height: 100%;
      transform-style: preserve-3d;
    }

    .creeper-head {
      position: absolute;
      width: 60px;
      height: 60px;
      background: linear-gradient(135deg, #5fa052 0%, #4a8a3f 50%, #3d7334 100%);
      top: 20%;
      left: 50%;
      transform: translate(-50%, 0) translateZ(10px);
      border: 2px solid #2d5a26;
      box-shadow: inset 3px 3px 0 rgba(255,255,255,0.2), inset -3px -3px 0 rgba(0,0,0,0.2);
    }

    .creeper-face {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }

    .creeper-eye {
      position: absolute;
      width: 10px;
      height: 14px;
      background: #1a1a1a;
      top: 5px;
    }

    .creeper-eye.left { left: -15px; }
    .creeper-eye.right { right: -15px; }

    .creeper-mouth {
      position: absolute;
      width: 8px;
      height: 16px;
      background: #1a1a1a;
      top: 22px;
      left: -4px;
    }

    .creeper-mouth::before,
    .creeper-mouth::after {
      content: '';
      position: absolute;
      width: 8px;
      height: 8px;
      background: #1a1a1a;
    }

    .creeper-mouth::before {
      left: -8px;
      top: 8px;
    }

    .creeper-mouth::after {
      right: -8px;
      top: 8px;
    }

    .creeper-body {
      position: absolute;
      width: 40px;
      height: 50px;
      background: linear-gradient(135deg, #5fa052 0%, #4a8a3f 100%);
      top: 55%;
      left: 50%;
      transform: translate(-50%, 0) translateZ(0);
      border: 2px solid #2d5a26;
    }

    .creeper-foot {
      position: absolute;
      width: 16px;
      height: 20px;
      background: linear-gradient(180deg, #5fa052 0%, #4a8a3f 100%);
      bottom: -15px;
      border: 2px solid #2d5a26;
    }

    .creeper-foot.left { left: 15%; }
    .creeper-foot.right { right: 15%; }

    /* 3D çƒˆç„°ä½¿è€…æ¨¡å‹ */
    .blaze-3d {
      position: relative;
      width: 100%;
      height: 100%;
      transform-style: preserve-3d;
    }

    .blaze-head {
      position: absolute;
      width: 50px;
      height: 50px;
      background: linear-gradient(135deg, #ffdd44 0%, #ff9900 50%, #cc6600 100%);
      top: 25%;
      left: 50%;
      transform: translate(-50%, 0) translateZ(15px);
      border: 2px solid #993300;
      box-shadow: 0 0 20px rgba(255, 150, 0, 0.6);
    }

    .blaze-eye {
      position: absolute;
      width: 8px;
      height: 8px;
      background: #1a1a1a;
      top: 15px;
    }

    .blaze-eye.left { left: 10px; }
    .blaze-eye.right { right: 10px; }

    .blaze-mouth {
      position: absolute;
      width: 20px;
      height: 6px;
      background: #1a1a1a;
      bottom: 12px;
      left: 50%;
      transform: translateX(-50%);
    }

    .blaze-rod {
      position: absolute;
      width: 8px;
      height: 40px;
      background: linear-gradient(180deg, #ffee88 0%, #ffaa00 50%, #ff6600 100%);
      border: 1px solid #cc5500;
      animation: blazeFloat 1.5s ease-in-out infinite;
      box-shadow: 0 0 10px rgba(255, 150, 0, 0.5);
    }

    @keyframes blazeFloat {
      0%, 100% { transform: translateY(0) rotate(0deg); }
      50% { transform: translateY(-5px) rotate(5deg); }
    }

    .blaze-smoke {
      position: absolute;
      width: 15px;
      height: 15px;
      background: rgba(255, 150, 0, 0.3);
      border-radius: 50%;
      animation: smokeRise 2s ease-out infinite;
    }

    @keyframes smokeRise {
      0% { transform: translateY(0) scale(1); opacity: 0.5; }
      100% { transform: translateY(-30px) scale(2); opacity: 0; }
    }

    /* 3D å²å¸å¤«æ¨¡å‹ */
    .steve-3d {
      position: relative;
      width: 100%;
      height: 100%;
      transform-style: preserve-3d;
    }

    .steve-head {
      position: absolute;
      width: 50px;
      height: 50px;
      background: linear-gradient(180deg, #c4a57b 0%, #a8835a 100%);
      top: 15%;
      left: 50%;
      transform: translate(-50%, 0) translateZ(15px);
      border: 2px solid #5a4730;
    }

    .steve-hair {
      position: absolute;
      width: 100%;
      height: 15px;
      background: #3d2817;
      top: 0;
      left: 0;
    }

    .steve-eye {
      position: absolute;
      width: 6px;
      height: 6px;
      background: #3d5afe;
      top: 20px;
    }

    .steve-eye.left { left: 12px; }
    .steve-eye.right { right: 12px; }

    .steve-eye::before {
      content: '';
      position: absolute;
      width: 2px;
      height: 2px;
      background: #fff;
      top: 1px;
      left: 1px;
    }

    .steve-nose {
      position: absolute;
      width: 6px;
      height: 4px;
      background: #b8946e;
      top: 28px;
      left: 50%;
      transform: translateX(-50%);
    }

    .steve-mouth {
      position: absolute;
      width: 14px;
      height: 3px;
      background: #8b6f4e;
      bottom: 8px;
      left: 50%;
      transform: translateX(-50%);
    }

    .steve-body {
      position: absolute;
      width: 40px;
      height: 55px;
      background: linear-gradient(180deg, #00b7b7 0%, #009999 100%);
      top: 45%;
      left: 50%;
      transform: translate(-50%, 0) translateZ(0);
      border: 2px solid #006666;
    }

    .steve-arm {
      position: absolute;
      width: 15px;
      height: 50px;
      background: linear-gradient(180deg, #00b7b7 50%, #c4a57b 50%);
      top: 45%;
      border: 2px solid #006666;
    }

    .steve-arm.left {
      left: 18%;
      transform: translateX(-100%) rotate(10deg);
    }

    .steve-arm.right {
      right: 18%;
      transform: translateX(100%) rotate(-10deg);
    }

    .steve-leg {
      position: absolute;
      width: 18px;
      height: 45px;
      background: linear-gradient(180deg, #3d3daa 0%, #2d2d88 100%);
      bottom: -8%;
      border: 2px solid #1a1a66;
    }

    .steve-leg.left { left: 26%; }
    .steve-leg.right { right: 26%; }

    /* éš±è—çš„Canvasç”¨æ–¼åœ–ç‰‡ç”Ÿæˆ */
    #cardCanvas {
      display: none;
    }

    @media (max-width: 600px) {
      h1 { font-size: 2rem; }
      .question-word { font-size: 2.5rem; letter-spacing: 4px; }
      .mc-input { width: 100%; font-size: 1.5rem; }
      .stat-box { min-width: 80px; padding: 8px 10px; }
      .stat-value { font-size: 1.2rem; }
      .hearts { font-size: 1.4rem; }
      .ground-title { font-size: 1.5rem; }
      .item-info-grid { grid-template-columns: 1fr; }
      .item-icon { font-size: 2rem; min-width: 40px; }
      .item-name { font-size: 1.2rem; }
      .item-desc { font-size: 1rem; }
      .reward-card { padding: 15px; }
      .reward-3d-container { width: 150px; height: 150px; }
    }
  </style>
</head>
<body>
  <div class="bg-blocks" id="bgBlocks"></div>
  <button class="mc-btn fullscreen-btn" onclick="toggleFullscreen()">â›¶ å…¨è¢å¹•</button>

  <h1>â›ï¸ Minecraft è©èªæŒ–ç¤¦ â›ï¸</h1>
  <div class="subtitle">æŒ–æ˜çŸ¥è­˜çš„ç¤¦è„ˆï¼æº–ç¢ºæ‰“å‡ºè©èªä¾†ç²å¾—ç¶“é©—å€¼ï¼</div>

  <div class="game-container">
    <div class="mc-panel" id="gamePanel">
      <div class="status-bar">
        <div class="stat-box">
          <div class="stat-label">â›ï¸ é—œå¡</div>
          <div class="stat-value aqua"><span id="currentLevel">1</span>/10</div>
        </div>
        <div class="stat-box">
          <div class="stat-label">ğŸ”¥ é€£æ“Š</div>
          <div class="stat-value gold" id="combo">0</div>
        </div>
        <div class="stat-box">
          <div class="stat-label">ğŸª é¤…ä¹¾</div>
          <div class="stat-value" id="cookies">0</div>
        </div>
        <div class="stat-box">
          <div class="stat-label">â¤ï¸ ç”Ÿå‘½</div>
          <div class="hearts" id="hearts">
            <span class="heart">â¤ï¸</span>
            <span class="heart">â¤ï¸</span>
            <span class="heart">â¤ï¸</span>
          </div>
        </div>
      </div>

      <!-- é‡Œç¨‹ç¢‘çå‹µ -->
      <div style="text-align: center; color: var(--mc-gray); margin-bottom: 10px;">
        ğŸ† é‡Œç¨‹ç¢‘çå‹µï¼ˆé»æ“Šå·²è§£é–çš„çå‹µæŸ¥çœ‹ï¼‰
      </div>
      <div class="milestones">
        <div class="milestone" id="milestone30" onclick="showRewardCard('cow')" title="å®Œæˆ30é¡Œ">
          <span>ğŸ„</span>
          <div class="milestone-label">30é¡Œ</div>
        </div>
        <div class="milestone" id="milestone60" onclick="showRewardCard('creeper')" title="å®Œæˆ60é¡Œ">
          <span>ğŸ’š</span>
          <div class="milestone-label">60é¡Œ</div>
        </div>
        <div class="milestone" id="milestone90" onclick="showRewardCard('blaze')" title="å®Œæˆ90é¡Œ">
          <span>ğŸ”¥</span>
          <div class="milestone-label">90é¡Œ</div>
        </div>
        <div class="milestone" id="milestone100" onclick="showRewardCard('steve')" title="å®Œæˆ100é¡Œ">
          <span>â­</span>
          <div class="milestone-label">100é¡Œ</div>
        </div>
      </div>

      <div class="xp-bar-container">
        <div class="xp-bar" id="xpBar" style="width: 0%"></div>
        <div class="xp-text">XP: <span id="xpValue">0</span> | é€²åº¦: <span id="progress">0</span>%</div>
      </div>

      <div style="text-align: center; margin: 15px 0; color: var(--mc-gray);">
        é¡Œç›® <span id="questionNum">1</span>/<span id="totalQuestionNum">100</span> | 
        <span style="color: var(--mc-green);">æ­£ç¢º <span id="correctCount">0</span></span> | 
        <span style="color: var(--mc-red);">éŒ¯èª¤ <span id="wrongCount">0</span></span> | 
        <span style="color: var(--mc-gray);">ç•¥é <span id="skipCount">0</span></span> |
        æ­£ç¢ºç‡ <span id="accuracy">0</span>%
      </div>

      <div class="question-area">
        <div class="question-label">â›ï¸ æŒ–æ˜é€™å€‹è©èª â›ï¸</div>
        <div class="question-word" id="questionWord" oncopy="return false;" oncut="return false;" onpaste="return false;" oncontextmenu="return false;">â€”</div>
      </div>

      <div class="input-area">
        <input type="text" class="mc-input" id="answerInput" placeholder="è¼¸å…¥ç­”æ¡ˆ..." autocomplete="off">
      </div>

      <div class="button-area">
        <button class="mc-btn green" id="submitBtn" onclick="submitAnswer()">â›ï¸ æŒ–æ˜ï¼</button>
        <button class="mc-btn gold" id="skipBtn" onclick="openShop()">ğŸª è·³é (èŠ±è²» 3ğŸª)</button>
        <button class="mc-btn hidden" id="nextBtn" onclick="nextQuestion()">â¡ï¸ ä¸‹ä¸€é¡Œ</button>
      </div>

      <div class="inventory">
        <div class="inv-slot selected">
          <span class="inv-item">â›ï¸</span>
        </div>
        <div class="inv-slot">
          <span class="inv-item">ğŸª</span>
          <span class="inv-count" id="invCookies">0</span>
        </div>
        <div class="inv-slot">
          <span class="inv-item">ğŸ’</span>
          <span class="inv-count" id="invDiamonds">0</span>
        </div>
        <div class="inv-slot">
          <span class="inv-item">â­</span>
          <span class="inv-count" id="invStars">0</span>
        </div>
        <div class="inv-slot"></div>
        <div class="inv-slot"></div>
        <div class="inv-slot"></div>
        <div class="inv-slot"></div>
        <div class="inv-slot"></div>
      </div>
    </div>

    <div class="mc-panel hidden" id="endPanel">
      <div class="end-screen">
        <div class="end-title">ğŸ‰ æŒ–ç¤¦å®Œæˆï¼</div>
        <div style="font-size: 1.5rem; color: var(--mc-aqua);">ä½ æˆåŠŸæŒ–æ˜äº†æ‰€æœ‰è©èªï¼</div>
        
        <div class="stats-grid">
          <div class="stat-box">
            <div class="stat-label">æ­£ç¢º</div>
            <div class="stat-value green" id="endCorrect">0</div>
          </div>
          <div class="stat-box">
            <div class="stat-label">éŒ¯èª¤</div>
            <div class="stat-value red" id="endWrong">0</div>
          </div>
          <div class="stat-box">
            <div class="stat-label">ç•¥é</div>
            <div class="stat-value" id="endSkip">0</div>
          </div>
          <div class="stat-box">
            <div class="stat-label">æ­£ç¢ºç‡</div>
            <div class="stat-value gold" id="endAccuracy">0%</div>
          </div>
          <div class="stat-box">
            <div class="stat-label">æœ€é«˜é€£æ“Š</div>
            <div class="stat-value aqua" id="endMaxCombo">0</div>
          </div>
          <div class="stat-box">
            <div class="stat-label">ç¸½XP</div>
            <div class="stat-value green" id="endXP">0</div>
          </div>
        </div>

        <div style="margin: 20px 0; font-size: 1.3rem; color: var(--mc-gold);">
          ğŸ† å·²è§£é–çš„çå‹µï¼ˆé»æ“ŠæŸ¥çœ‹ï¼‰ï¼š
        </div>
        <div class="milestones" id="endMilestones">
        </div>

        <button class="mc-btn green" onclick="restartGame()" style="font-size: 1.5rem; padding: 15px 40px; margin-top: 20px;">
          ğŸ”„ å†æŒ–ä¸€æ¬¡ï¼
        </button>
      </div>
    </div>
  </div>

  <div class="ground-info">
    <div class="ground-title">ğŸ“¦ ç¤¦å·¥èƒŒåŒ…èªªæ˜</div>
    <div class="item-info-grid">
      <div class="item-info-card">
        <div class="item-icon">ğŸª</div>
        <div class="item-details">
          <div class="item-name">é¤…ä¹¾ Cookie</div>
          <div class="item-desc">
            æ¯ <span class="highlight">5 é¡Œæ­£ç¢º</span> ç²å¾— 1 å€‹<br>
            å¯ç”¨ <span class="highlight">3 å€‹</span> è·³éå›°é›£é¡Œç›®<br>
            åˆå§‹æ“æœ‰ <span class="green">5 å€‹</span>
          </div>
        </div>
      </div>
      <div class="item-info-card">
        <div class="item-icon">ğŸ’</div>
        <div class="item-details">
          <div class="item-name">é‘½çŸ³ Diamond</div>
          <div class="item-desc">
            æ¯ <span class="highlight">10 é¡Œæ­£ç¢º</span> ç²å¾— 1 å€‹<br>
            çè²´çš„æ”¶è—å“ï¼<br>
            è±¡å¾µä½ çš„ <span class="green">æŒ–ç¤¦å¯¦åŠ›</span>
          </div>
        </div>
      </div>
      <div class="item-info-card">
        <div class="item-icon">â­</div>
        <div class="item-details">
          <div class="item-name">æ˜Ÿæ˜Ÿ Star</div>
          <div class="item-desc">
            æ¯ç­”å° <span class="highlight">1 é¡Œ</span> ç²å¾— 1 å€‹<br>
            è¨˜éŒ„ä½ çš„ <span class="green">æ­£ç¢ºç¸½æ•¸</span><br>
            è¶Šå¤šæ˜Ÿæ˜Ÿä»£è¡¨è¶Šå¼·ï¼
          </div>
        </div>
      </div>
      <div class="item-info-card">
        <div class="item-icon">ğŸ†</div>
        <div class="item-details">
          <div class="item-name">é‡Œç¨‹ç¢‘çå‹µ</div>
          <div class="item-desc">
            <span class="highlight">30é¡Œ</span>: ğŸ„ ä¹³ç‰›<br>
            <span class="highlight">60é¡Œ</span>: ğŸ’š è‹¦åŠ›æ€•<br>
            <span class="highlight">90é¡Œ</span>: ğŸ”¥ çƒˆç„°ä½¿è€…<br>
            <span class="highlight">100é¡Œ</span>: â­ å²å¸å¤«
          </div>
        </div>
      </div>
    </div>
    <div class="ore-decoration">
      <div class="ore coal"></div>
      <div class="ore iron"></div>
      <div class="ore gold-ore"></div>
      <div class="ore diamond-ore"></div>
      <div class="ore emerald-ore"></div>
    </div>
  </div>

  <!-- å•†åº—å½ˆçª— -->
  <div class="modal-overlay hidden" id="shopModal">
    <div class="mc-panel modal-content">
      <div class="modal-title">ğŸ§° ç¤¦å·¥å•†åº—</div>
      
      <div class="shop-item">
        <div class="shop-item-info">
          <div class="shop-item-name">â›ï¸ è·³éç•¶å‰è©èª</div>
          <div class="shop-item-desc">ä¸æƒ³å¡é—œï¼Ÿç”¨é¤…ä¹¾ç›´æ¥é€šéé€™ä¸€é¡Œ<br>ï¼ˆä¸ç®—æ­£ç¢ºã€ä¸æ‰£å¿ƒï¼Œè¨˜éŒ„ç‚ºç•¥éï¼‰</div>
        </div>
        <button class="mc-btn gold" onclick="useSkip()">èŠ±è²» 3ğŸª</button>
      </div>

      <div style="text-align: center; margin-top: 20px;">
        <button class="mc-btn red" onclick="closeShop()">âœ– é—œé–‰</button>
      </div>
    </div>
  </div>

  <!-- çå‹µå¡ç‰‡å½ˆçª— -->
  <div class="modal-overlay hidden" id="rewardModal">
    <div class="reward-card-modal">
      <div class="reward-card" id="rewardCardContent">
        <div class="reward-card-header">
          <div class="reward-card-title" id="rewardTitle">ğŸ† é‡Œç¨‹ç¢‘é”æˆï¼</div>
          <div class="reward-card-subtitle" id="rewardSubtitle">å®Œæˆ 30 é¡Œ</div>
        </div>

        <div class="reward-3d-container">
          <div class="reward-3d-model" id="reward3dModel">
            <!-- 3Dæ¨¡å‹æœƒå‹•æ…‹æ’å…¥ -->
          </div>
        </div>

        <div class="reward-stats">
          <div class="reward-stats-row">
            <span class="reward-stats-label">æ­£ç¢ºé¡Œæ•¸</span>
            <span class="reward-stats-value" id="rewardCorrect">0</span>
          </div>
          <div class="reward-stats-row">
            <span class="reward-stats-label">æ­£ç¢ºç‡</span>
            <span class="reward-stats-value" id="rewardAccuracy">0%</span>
          </div>
          <div class="reward-stats-row">
            <span class="reward-stats-label">æœ€é«˜é€£æ“Š</span>
            <span class="reward-stats-value" id="rewardCombo">0</span>
          </div>
          <div class="reward-stats-row">
            <span class="reward-stats-label">ç¸½ç¶“é©—å€¼</span>
            <span class="reward-stats-value" id="rewardXP">0</span>
          </div>
        </div>

        <input type="text" class="reward-name-input" id="rewardNameInput" placeholder="è¼¸å…¥ä½ çš„åå­—..." maxlength="20">

        <div class="reward-buttons">
          <button class="mc-btn green" onclick="saveCardAsImage()">ğŸ“· å„²å­˜åœ–ç‰‡</button>
          <button class="mc-btn red" onclick="closeRewardModal()">âœ– é—œé–‰</button>
        </div>
      </div>
    </div>
  </div>

  <div class="combo-display hidden" id="comboDisplay"></div>

  <!-- éš±è—çš„Canvasç”¨æ–¼ç”Ÿæˆåœ–ç‰‡ -->
  <canvas id="cardCanvas" width="400" height="550"></canvas>

  <script>
    const twoCharWords = [
      "è¬¹æ…", "è¬™è™›", "æ•æ·", "çŒ¶è±«", "èª ä¿¡", "æ†§æ†¬", "å°·å°¬", "æ…šæ„§", "å‰›æ¯…", "å¯¬å®¹",
      "æ¾æ¹ƒ", "æ¸²æŸ“", "æ¯ç«­", "ç´°è†©", "æ¹›è—", "å¹½éœ", "ç¹ç‘£", "é¼é—Š", "é¡«æŠ–", "é™¶é†‰",
      "å¾˜å¾Š", "ç€è¦½", "é†é‡€", "å®åš€", "å¦¥å”", "ç«¶çˆ­", "å‹‰å‹µ", "è¦å¾‹", "ç¶­è­·", "é—œéµ",
      "é‚è¼¯", "åˆ¤æ–·", "åˆ†æ", "éˆæ„Ÿ", "å“è¶Š", "è³‡æ·±", "ç­–ç•¥", "æ•éŠ³", "é æ¸¬", "é ˜æ‚Ÿ",
      "è±¡å¾µ", "æ°¸æ†", "ç¯€å¥", "æ ¸å¿ƒ", "çµæ§‹", "èµ·æº", "éšœç¤™", "ä¾·é™", "å¹³è¡¡", "å’Œè«§"
    ];

    const threeCharWords = [
      "ç¶ æ²¹æ²¹", "äº®æ™¶æ™¶", "æ‡¶æ´‹æ´‹", "äº‚ç³Ÿç³Ÿ", "å­¤é›¶é›¶", "æ…¢åå", "ä¹¾å·´å·´", "çšºå·´å·´", "ç¾ç­”ç­”", "éŸ¿å™¹å™¹",
      "æ²‰ç”¸ç”¸", "éœ§æ¿›æ¿›", "æ¿•æ¼‰æ¼‰", "å–œæ´‹æ´‹", "å¯†éº»éº»", "ç©ºç›ªç›ª", "è»Ÿç¶¿ç¶¿", "ç†±çƒ˜çƒ˜", "èˆˆæ²–æ²–", "éœæ‚„æ‚„",
      "çµ†è…³çŸ³", "æ•²é–€ç£š", "è©¦é‡‘çŸ³", "å°ç«ç·š", "é‡Œç¨‹ç¢‘", "ä¿è­·è‰²", "è«éæ˜¯", "æ²’æƒ³åˆ°", "å¿ä¸ä½", "å·®ä¸å¤š",
      "ä¸‹é¦¬å¨", "ç ´å¤©è’", "é–€å¤–æ¼¢", "æ“‹ç®­ç‰Œ", "é¦¬å¾Œç‚®", "è€³é‚Šé¢¨", "è€æ‰ç‰™", "æ¡ƒèŠ±æº", "é–‰é–€ç¾¹", "æ›¿ç½ªç¾Š",
      "å®šå¿ƒä¸¸", "æ½‘å†·æ°´", "ç‚’å†·é£¯", "èµ°éå ´", "æ‡‰è²èŸ²", "éµé£¯ç¢—", "è€èŠ±æ‹›", "æŒ‡æ®æ£’", "è½‰æŠ˜é»", "å£é ­ç¦ª"
    ];

    const wordBank = [...twoCharWords, ...threeCharWords];

    let gameState = {
      currentLevel: 1,
      totalLevels: 10,
      questionsPerLevel: 10,
      currentQuestion: 0,
      totalQuestions: wordBank.length,
      combo: 0,
      maxCombo: 0,
      cookies: 5,
      lives: 3,
      maxLives: 3,
      xp: 0,
      correct: 0,
      wrong: 0,
      skipped: 0,
      diamonds: 0,
      stars: 0,
      currentWord: "",
      answered: false,
      shuffledWords: [],
      unlockedRewards: {
        cow: false,
        creeper: false,
        blaze: false,
        steve: false
      }
    };

    let currentRewardType = '';

    function init() {
      gameState.shuffledWords = shuffleArray([...wordBank]);
      gameState.totalQuestions = gameState.shuffledWords.length;
      gameState.questionsPerLevel = Math.ceil(gameState.totalQuestions / gameState.totalLevels);
      
      createBackgroundBlocks();
      nextQuestion();
      updateDisplay();
      
      document.getElementById('totalQuestionNum').textContent = gameState.totalQuestions;
      
      const questionWord = document.getElementById('questionWord');
      questionWord.addEventListener('selectstart', function(e) {
        e.preventDefault();
        return false;
      });
      
      questionWord.addEventListener('dragstart', function(e) {
        e.preventDefault();
        return false;
      });
      
      document.addEventListener('keydown', function(e) {
        const selection = window.getSelection();
        const questionWord = document.getElementById('questionWord');
        
        if (selection.toString() && questionWord.contains(selection.anchorNode)) {
          if ((e.ctrlKey || e.metaKey) && (e.key === 'c' || e.key === 'C')) {
            e.preventDefault();
            return false;
          }
        }
      });
      
      document.getElementById('answerInput').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
          if (!gameState.answered) {
            submitAnswer();
          } else {
            nextQuestion();
          }
        }
      });
    }

    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    function createBackgroundBlocks() {
      const container = document.getElementById('bgBlocks');
      const colors = ['#8b6914', '#7a7a7a', '#4a7024', '#3cb371', '#ffcc00'];
      for (let i = 0; i < 15; i++) {
        const block = document.createElement('div');
        block.className = 'floating-block';
        block.style.left = Math.random() * 100 + '%';
        block.style.top = Math.random() * 100 + '%';
        block.style.background = colors[Math.floor(Math.random() * colors.length)];
        block.style.animationDelay = Math.random() * 5 + 's';
        container.appendChild(block);
      }
    }

    function nextQuestion() {
      if (gameState.currentQuestion >= gameState.totalQuestions) {
        endGame();
        return;
      }

      gameState.currentWord = gameState.shuffledWords[gameState.currentQuestion];
      gameState.currentQuestion++;
      gameState.answered = false;
      gameState.currentLevel = Math.min(
        Math.ceil(gameState.currentQuestion / gameState.questionsPerLevel),
        gameState.totalLevels
      );

      document.getElementById('questionWord').textContent = gameState.currentWord;
      document.getElementById('answerInput').value = '';
      document.getElementById('answerInput').className = 'mc-input';
      document.getElementById('answerInput').disabled = false;
      document.getElementById('answerInput').focus();

      document.getElementById('submitBtn').classList.remove('hidden');
      document.getElementById('skipBtn').classList.remove('hidden');
      document.getElementById('nextBtn').classList.add('hidden');

      updateDisplay();
      checkMilestones();
    }

    function submitAnswer() {
      const input = document.getElementById('answerInput');
      const answer = input.value.trim();

      if (!answer) return;

      if (answer === gameState.currentWord) {
        gameState.correct++;
        gameState.combo++;
        if (gameState.combo > gameState.maxCombo) {
          gameState.maxCombo = gameState.combo;
        }

        const baseXP = 10;
        const comboBonus = Math.min(gameState.combo, 10) * 2;
        const earnedXP = baseXP + comboBonus;
        gameState.xp += earnedXP;

        if (gameState.correct % 5 === 0) {
          gameState.cookies++;
          showToast("ğŸª ç²å¾—é¤…ä¹¾ï¼");
        }

        if (gameState.correct % 10 === 0) {
          gameState.diamonds++;
          showToast("ğŸ’ ç²å¾—é‘½çŸ³ï¼");
        }

        input.className = 'mc-input correct';
        showCombo();
        createParticles('â­', 5);
        gameState.answered = true;

        document.getElementById('submitBtn').classList.add('hidden');
        document.getElementById('skipBtn').classList.add('hidden');
        document.getElementById('nextBtn').classList.remove('hidden');

        checkMilestones();

      } else {
        gameState.wrong++;
        gameState.lives--;
        gameState.combo = 0;

        input.className = 'mc-input wrong';
        animateHeartDamage();
        createParticles('ğŸ’”', 3);

        if (gameState.lives <= 0) {
          endGame();
          return;
        }

        setTimeout(() => {
          input.className = 'mc-input';
          input.value = '';
          input.focus();
        }, 500);
      }

      updateDisplay();
    }

    function checkMilestones() {
      const correctCount = gameState.correct;
      
      if (correctCount >= 30 && !gameState.unlockedRewards.cow) {
        gameState.unlockedRewards.cow = true;
        document.getElementById('milestone30').classList.add('unlocked', 'clickable');
        showToast("ğŸ„ è§£é–ä¹³ç‰›çå‹µï¼é»æ“ŠæŸ¥çœ‹ï¼");
        setTimeout(() => showRewardCard('cow'), 500);
      }
      
      if (correctCount >= 60 && !gameState.unlockedRewards.creeper) {
        gameState.unlockedRewards.creeper = true;
        document.getElementById('milestone60').classList.add('unlocked', 'clickable');
        showToast("ğŸ’š è§£é–è‹¦åŠ›æ€•çå‹µï¼é»æ“ŠæŸ¥çœ‹ï¼");
        setTimeout(() => showRewardCard('creeper'), 500);
      }
      
      if (correctCount >= 90 && !gameState.unlockedRewards.blaze) {
        gameState.unlockedRewards.blaze = true;
        document.getElementById('milestone90').classList.add('unlocked', 'clickable');
        showToast("ğŸ”¥ è§£é–çƒˆç„°ä½¿è€…çå‹µï¼é»æ“ŠæŸ¥çœ‹ï¼");
        setTimeout(() => showRewardCard('blaze'), 500);
      }
      
      if (correctCount >= 100 && !gameState.unlockedRewards.steve) {
        gameState.unlockedRewards.steve = true;
        document.getElementById('milestone100').classList.add('unlocked', 'clickable');
        showToast("â­ è§£é–å²å¸å¤«çå‹µï¼é»æ“ŠæŸ¥çœ‹ï¼");
        setTimeout(() => showRewardCard('steve'), 500);
      }
    }

    function showRewardCard(type) {
      if (!gameState.unlockedRewards[type]) {
        showToast("âŒ å°šæœªè§£é–æ­¤çå‹µï¼");
        return;
      }

      currentRewardType = type;
      const modal = document.getElementById('rewardModal');
      const modelContainer = document.getElementById('reward3dModel');
      const title = document.getElementById('rewardTitle');
      const subtitle = document.getElementById('rewardSubtitle');

      const rewardInfo = {
        cow: { name: 'ğŸ„ ä¹³ç‰›', milestone: 'å®Œæˆ 30 é¡Œ', emoji: 'ğŸ„' },
        creeper: { name: 'ğŸ’š è‹¦åŠ›æ€•', milestone: 'å®Œæˆ 60 é¡Œ', emoji: 'ğŸ’š' },
        blaze: { name: 'ğŸ”¥ çƒˆç„°ä½¿è€…', milestone: 'å®Œæˆ 90 é¡Œ', emoji: 'ğŸ”¥' },
        steve: { name: 'â­ å²å¸å¤«', milestone: 'å®Œæˆ 100 é¡Œ', emoji: 'â­' }
      };

      title.textContent = `ğŸ† ç²å¾— ${rewardInfo[type].name}ï¼`;
      subtitle.textContent = rewardInfo[type].milestone;

      modelContainer.innerHTML = get3DModelHTML(type);

      const total = gameState.correct + gameState.wrong;
      const accuracy = total > 0 ? Math.round((gameState.correct / total) * 100) : 0;

      document.getElementById('rewardCorrect').textContent = gameState.correct;
      document.getElementById('rewardAccuracy').textContent = accuracy + '%';
      document.getElementById('rewardCombo').textContent = gameState.maxCombo;
      document.getElementById('rewardXP').textContent = gameState.xp;

      modal.classList.remove('hidden');
    }

    function get3DModelHTML(type) {
      switch(type) {
        case 'cow':
          return `
            <div class="cow-3d">
              <div class="cow-body"></div>
              <div class="cow-head">
                <div class="cow-horn left"></div>
                <div class="cow-horn right"></div>
              </div>
              <div class="cow-leg" style="left: 10px;"></div>
              <div class="cow-leg" style="left: 30px;"></div>
              <div class="cow-leg" style="right: 30px;"></div>
              <div class="cow-leg" style="right: 10px;"></div>
            </div>
          `;
        case 'creeper':
          return `
            <div class="creeper-3d">
              <div class="creeper-head">
                <div class="creeper-face">
                  <div class="creeper-eye left"></div>
                  <div class="creeper-eye right"></div>
                  <div class="creeper-mouth"></div>
                </div>
              </div>
              <div class="creeper-body">
                <div class="creeper-foot left"></div>
                <div class="creeper-foot right"></div>
              </div>
            </div>
          `;
        case 'blaze':
          return `
            <div class="blaze-3d">
              <div class="blaze-head">
                <div class="blaze-eye left"></div>
                <div class="blaze-eye right"></div>
                <div class="blaze-mouth"></div>
              </div>
              <div class="blaze-rod" style="top: 30%; left: 15%; animation-delay: 0s;"></div>
              <div class="blaze-rod" style="top: 35%; right: 15%; animation-delay: 0.3s;"></div>
              <div class="blaze-rod" style="top: 50%; left: 10%; animation-delay: 0.6s;"></div>
              <div class="blaze-rod" style="top: 55%; right: 10%; animation-delay: 0.9s;"></div>
              <div class="blaze-rod" style="top: 70%; left: 20%; animation-delay: 1.2s;"></div>
              <div class="blaze-rod" style="top: 75%; right: 20%; animation-delay: 1.5s;"></div>
              <div class="blaze-smoke" style="top: 20%; left: 40%; animation-delay: 0s;"></div>
              <div class="blaze-smoke" style="top: 25%; left: 55%; animation-delay: 0.5s;"></div>
              <div class="blaze-smoke" style="top: 30%; left: 45%; animation-delay: 1s;"></div>
            </div>
          `;
        case 'steve':
          return `
            <div class="steve-3d">
              <div class="steve-head">
                <div class="steve-hair"></div>
                <div class="steve-eye left"></div>
                <div class="steve-eye right"></div>
                <div class="steve-nose"></div>
                <div class="steve-mouth"></div>
              </div>
              <div class="steve-body"></div>
              <div class="steve-arm left"></div>
              <div class="steve-arm right"></div>
              <div class="steve-leg left"></div>
              <div class="steve-leg right"></div>
            </div>
          `;
        default:
          return '';
      }
    }

    function closeRewardModal() {
      document.getElementById('rewardModal').classList.add('hidden');
    }

    function saveCardAsImage() {
      const canvas = document.getElementById('cardCanvas');
      const ctx = canvas.getContext('2d');
      const playerName = document.getElementById('rewardNameInput').value || 'åŒ¿åç¤¦å·¥';

      // æ¸…é™¤ç•«å¸ƒ
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // èƒŒæ™¯æ¼¸å±¤
      const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
      gradient.addColorStop(0, '#2d1f4e');
      gradient.addColorStop(1, '#1a1a2e');
      ctx.fillStyle = gradient;
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      // é‚Šæ¡†
      ctx.strokeStyle = '#ffd700';
      ctx.lineWidth = 6;
      ctx.strokeRect(3, 3, canvas.width - 6, canvas.height - 6);

      // è¨­ç½®å­—é«”
      ctx.textAlign = 'center';

      // æ¨™é¡Œ
      ctx.font = 'bold 28px "VT323", monospace';
      ctx.fillStyle = '#ffd700';
      ctx.fillText('ğŸ† Minecraft è©èªæŒ–ç¤¦ ğŸ†', canvas.width / 2, 45);

      // çå‹µåç¨±
      const rewardNames = {
        cow: 'ğŸ„ ä¹³ç‰›',
        creeper: 'ğŸ’š è‹¦åŠ›æ€•',
        blaze: 'ğŸ”¥ çƒˆç„°ä½¿è€…',
        steve: 'â­ å²å¸å¤«'
      };
      const milestones = {
        cow: 'å®Œæˆ 30 é¡Œ',
        creeper: 'å®Œæˆ 60 é¡Œ',
        blaze: 'å®Œæˆ 90 é¡Œ',
        steve: 'å®Œæˆ 100 é¡Œ'
      };

      ctx.font = 'bold 24px "VT323", monospace';
      ctx.fillStyle = '#55ffff';
      ctx.fillText(`ç²å¾—ï¼š${rewardNames[currentRewardType]}`, canvas.width / 2, 85);

      ctx.font = '18px "VT323", monospace';
      ctx.fillStyle = '#aaaaaa';
      ctx.fillText(milestones[currentRewardType], canvas.width / 2, 110);

      // ç¹ªè£½3Dè§’è‰²ï¼ˆç°¡åŒ–ç‰ˆï¼‰
      draw3DCharacter(ctx, currentRewardType, canvas.width / 2, 200);

      // ç©å®¶åç¨±
      ctx.font = 'bold 22px "VT323", monospace';
      ctx.fillStyle = '#ffaa00';
      ctx.fillText(`ç¤¦å·¥ï¼š${playerName}`, canvas.width / 2, 320);

      // çµ±è¨ˆè³‡æ–™èƒŒæ™¯
      ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';
      ctx.fillRect(30, 340, canvas.width - 60, 140);

      // çµ±è¨ˆè³‡æ–™
      const total = gameState.correct + gameState.wrong;
      const accuracy = total > 0 ? Math.round((gameState.correct / total) * 100) : 0;

      ctx.font = '20px "VT323", monospace';
      ctx.textAlign = 'left';
      
      const stats = [
        { label: 'æ­£ç¢ºé¡Œæ•¸', value: gameState.correct, color: '#55ff55' },
        { label: 'æ­£ç¢ºç‡', value: accuracy + '%', color: '#ffaa00' },
        { label: 'æœ€é«˜é€£æ“Š', value: gameState.maxCombo, color: '#55ffff' },
        { label: 'ç¸½ç¶“é©—å€¼', value: gameState.xp, color: '#55ff55' }
      ];

      stats.forEach((stat, index) => {
        const y = 370 + index * 28;
        ctx.fillStyle = '#aaaaaa';
        ctx.fillText(stat.label + ':', 50, y);
        ctx.fillStyle = stat.color;
        ctx.textAlign = 'right';
        ctx.fillText(String(stat.value), canvas.width - 50, y);
        ctx.textAlign = 'left';
      });

      // æ—¥æœŸ
      ctx.textAlign = 'center';
      ctx.font = '16px "VT323", monospace';
      ctx.fillStyle = '#888888';
      const date = new Date().toLocaleDateString('zh-TW');
      ctx.fillText(date, canvas.width / 2, 520);

      // ä¸‹è¼‰åœ–ç‰‡
      const link = document.createElement('a');
      link.download = `minecraft-mining-${currentRewardType}-${playerName}.png`;
      link.href = canvas.toDataURL('image/png');
      link.click();

      showToast("ğŸ“· åœ–ç‰‡å·²å„²å­˜ï¼");
    }

    function draw3DCharacter(ctx, type, x, y) {
      ctx.save();
      ctx.translate(x, y);

      switch(type) {
        case 'cow':
          // èº«é«”
          ctx.fillStyle = '#f5f5f5';
          ctx.fillRect(-40, -20, 80, 50);
          ctx.strokeStyle = '#333';
          ctx.lineWidth = 2;
          ctx.strokeRect(-40, -20, 80, 50);
          // æ–‘é»
          ctx.fillStyle = '#3d3d3d';
          ctx.fillRect(-30, -10, 20, 15);
          ctx.fillRect(10, 5, 25, 20);
          // é ­
          ctx.fillStyle = '#f5f5f5';
          ctx.fillRect(-55, -30, 35, 35);
          ctx.strokeRect(-55, -30, 35, 35);
          // é¼»å­
          ctx.fillStyle = '#ffcccc';
          ctx.fillRect(-50, -5, 25, 15);
          // è§’
          ctx.fillStyle = '#d4d4d4';
          ctx.fillRect(-50, -45, 8, 15);
          ctx.fillRect(-30, -45, 8, 15);
          // è…¿
          ctx.fillStyle = '#f5f5f5';
          for (let i = 0; i < 4; i++) {
            const legX = -35 + i * 22;
            ctx.fillRect(legX, 30, 12, 30);
            ctx.fillStyle = '#3d3d3d';
            ctx.fillRect(legX, 50, 12, 10);
            ctx.fillStyle = '#f5f5f5';
          }
          break;

        case 'creeper':
          // é ­
          ctx.fillStyle = '#5fa052';
          ctx.fillRect(-30, -60, 60, 60);
          ctx.strokeStyle = '#2d5a26';
          ctx.lineWidth = 2;
          ctx.strokeRect(-30, -60, 60, 60);
          // è‡‰
          ctx.fillStyle = '#1a1a1a';
          ctx.fillRect(-20, -50, 10, 14);
          ctx.fillRect(10, -50, 10, 14);
          ctx.fillRect(-4, -35, 8, 16);
          ctx.fillRect(-12, -25, 8, 8);
          ctx.fillRect(4, -25, 8, 8);
          // èº«é«”
          ctx.fillStyle = '#5fa052';
          ctx.fillRect(-20, 0, 40, 50);
          ctx.strokeRect(-20, 0, 40, 50);
          // è…³
          ctx.fillRect(-20, 50, 16, 20);
          ctx.fillRect(4, 50, 16, 20);
          break;

        case 'blaze':
          // é ­
          ctx.fillStyle = '#ffdd44';
          const blazeGradient = ctx.createLinearGradient(-25, -50, 25, 0);
          blazeGradient.addColorStop(0, '#ffdd44');
          blazeGradient.addColorStop(0.5, '#ff9900');
          blazeGradient.addColorStop(1, '#cc6600');
          ctx.fillStyle = blazeGradient;
          ctx.fillRect(-25, -50, 50, 50);
          ctx.strokeStyle = '#993300';
          ctx.lineWidth = 2;
          ctx.strokeRect(-25, -50, 50, 50);
          // çœ¼ç›å’Œå˜´
          ctx.fillStyle = '#1a1a1a';
          ctx.fillRect(-15, -40, 8, 8);
          ctx.fillRect(7, -40, 8, 8);
          ctx.fillRect(-10, -20, 20, 6);
          // ç«ç„°æ£’
          ctx.fillStyle = '#ffaa00';
          for (let i = 0; i < 6; i++) {
            const angle = (i / 6) * Math.PI * 2;
            const rodX = Math.cos(angle) * 45;
            const rodY = Math.sin(angle) * 30 + 10;
            ctx.fillRect(rodX - 4, rodY - 20, 8, 40);
          }
          // ç™¼å…‰æ•ˆæœ
          ctx.shadowColor = 'rgba(255, 150, 0, 0.5)';
          ctx.shadowBlur = 20;
          break;

        case 'steve':
          // é ­
          ctx.fillStyle = '#c4a57b';
          ctx.fillRect(-25, -70, 50, 50);
          ctx.strokeStyle = '#5a4730';
          ctx.lineWidth = 2;
          ctx.strokeRect(-25, -70, 50, 50);
          // é ­é«®
          ctx.fillStyle = '#3d2817';
          ctx.fillRect(-25, -70, 50, 15);
          // çœ¼ç›
          ctx.fillStyle = '#3d5afe';
          ctx.fillRect(-15, -50, 6, 6);
          ctx.fillRect(9, -50, 6, 6);
          ctx.fillStyle = '#fff';
          ctx.fillRect(-14, -49, 2, 2);
          ctx.fillRect(10, -49, 2, 2);
          // é¼»å­
          ctx.fillStyle = '#b8946e';
          ctx.fillRect(-3, -42, 6, 4);
          // å˜´
          ctx.fillStyle = '#8b6f4e';
          ctx.fillRect(-7, -32, 14, 3);
          // èº«é«”
          ctx.fillStyle = '#00b7b7';
          ctx.fillRect(-20, -20, 40, 55);
          ctx.strokeStyle = '#006666';
          ctx.strokeRect(-20, -20, 40, 55);
          // æ‰‹è‡‚
          ctx.fillRect(-35, -20, 15, 50);
          ctx.fillRect(20, -20, 15, 50);
          ctx.fillStyle = '#c4a57b';
          ctx.fillRect(-35, 5, 15, 25);
          ctx.fillRect(20, 5, 15, 25);
          // è…¿
          ctx.fillStyle = '#3d3daa';
          ctx.fillRect(-18, 35, 16, 45);
          ctx.fillRect(2, 35, 16, 45);
          break;
      }

      ctx.restore();
    }

    function useSkip() {
      if (gameState.cookies < 3) {
        showToast("âŒ é¤…ä¹¾ä¸è¶³ï¼");
        return;
      }

      gameState.cookies -= 3;
      gameState.skipped++;
      gameState.combo = 0;
      gameState.answered = true;

      closeShop();
      showToast("â­ï¸ å·²è·³éæ­¤é¡Œ");

      document.getElementById('submitBtn').classList.add('hidden');
      document.getElementById('skipBtn').classList.add('hidden');
      document.getElementById('nextBtn').classList.remove('hidden');
      document.getElementById('answerInput').disabled = true;

      updateDisplay();
    }

    function showCombo() {
      if (gameState.combo >= 2) {
        const display = document.getElementById('comboDisplay');
        display.textContent = `ğŸ”¥ ${gameState.combo} é€£æ“Šï¼`;
        display.classList.remove('hidden');
        
        setTimeout(() => {
          display.classList.add('hidden');
        }, 1500);
      }
    }

    function animateHeartDamage() {
      const hearts = document.querySelectorAll('.heart');
      const lostIndex = gameState.maxLives - gameState.lives - 1;
      if (hearts[lostIndex]) {
        hearts[lostIndex].classList.add('damage');
        setTimeout(() => {
          hearts[lostIndex].classList.remove('damage');
        }, 300);
      }
    }

    function createParticles(emoji, count) {
      for (let i = 0; i < count; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        particle.textContent = emoji;
        particle.style.left = (40 + Math.random() * 20) + '%';
        particle.style.top = '40%';
        particle.style.animationDelay = (i * 0.1) + 's';
        document.body.appendChild(particle);
        
        setTimeout(() => particle.remove(), 1000);
      }
    }

    function showToast(message) {
      const existing = document.querySelector('.toast');
      if (existing) existing.remove();

      const toast = document.createElement('div');
      toast.className = 'toast';
      toast.textContent = message;
      document.body.appendChild(toast);

      setTimeout(() => toast.remove(), 3000);
    }

    function updateDisplay() {
      document.getElementById('currentLevel').textContent = gameState.currentLevel;
      document.getElementById('combo').textContent = gameState.combo;
      document.getElementById('cookies').textContent = gameState.cookies;
      document.getElementById('invCookies').textContent = gameState.cookies;
      document.getElementById('invDiamonds').textContent = gameState.diamonds;
      document.getElementById('invStars').textContent = gameState.correct;
      document.getElementById('xpValue').textContent = gameState.xp;
      document.getElementById('questionNum').textContent = gameState.currentQuestion;
      document.getElementById('correctCount').textContent = gameState.correct;
      document.getElementById('wrongCount').textContent = gameState.wrong;
      document.getElementById('skipCount').textContent = gameState.skipped;

      const progress = Math.round((gameState.currentQuestion / gameState.totalQuestions) * 100);
      document.getElementById('progress').textContent = progress;
      document.getElementById('xpBar').style.width = progress + '%';

      const total = gameState.correct + gameState.wrong;
      const accuracy = total > 0 ? Math.round((gameState.correct / total) * 100) : 0;
      document.getElementById('accuracy').textContent = accuracy;

      const heartsContainer = document.getElementById('hearts');
      heartsContainer.innerHTML = '';
      for (let i = 0; i < gameState.maxLives; i++) {
        const heart = document.createElement('span');
        heart.className = 'heart' + (i >= gameState.lives ? ' lost' : '');
        heart.textContent = 'â¤ï¸';
        heartsContainer.appendChild(heart);
      }

      // æ›´æ–°é‡Œç¨‹ç¢‘ç‹€æ…‹
      if (gameState.unlockedRewards.cow) {
        document.getElementById('milestone30').classList.add('unlocked', 'clickable');
      }
      if (gameState.unlockedRewards.creeper) {
        document.getElementById('milestone60').classList.add('unlocked', 'clickable');
      }
      if (gameState.unlockedRewards.blaze) {
        document.getElementById('milestone90').classList.add('unlocked', 'clickable');
      }
      if (gameState.unlockedRewards.steve) {
        document.getElementById('milestone100').classList.add('unlocked', 'clickable');
      }
    }

    function openShop() {
      document.getElementById('shopModal').classList.remove('hidden');
    }

    function closeShop() {
      document.getElementById('shopModal').classList.add('hidden');
    }

    function endGame() {
      document.getElementById('gamePanel').classList.add('hidden');
      document.getElementById('endPanel').classList.remove('hidden');

      const total = gameState.correct + gameState.wrong;
      const accuracy = total > 0 ? Math.round((gameState.correct / total) * 100) : 0;

      document.getElementById('endCorrect').textContent = gameState.correct;
      document.getElementById('endWrong').textContent = gameState.wrong;
      document.getElementById('endSkip').textContent = gameState.skipped;
      document.getElementById('endAccuracy').textContent = accuracy + '%';
      document.getElementById('endMaxCombo').textContent = gameState.maxCombo;
      document.getElementById('endXP').textContent = gameState.xp;

      if (gameState.lives <= 0) {
        document.querySelector('.end-title').textContent = 'ğŸ’€ ç¤¦å‘å´©å¡Œï¼';
        document.querySelector('.end-screen > div:nth-child(2)').textContent = 'ä½ çš„ç”Ÿå‘½å€¼è€—ç›¡äº†...';
      }

      // é¡¯ç¤ºå·²è§£é–çš„çå‹µ
      const endMilestones = document.getElementById('endMilestones');
      endMilestones.innerHTML = '';
      
      const rewards = [
        { key: 'cow', emoji: 'ğŸ„', label: '30é¡Œ' },
        { key: 'creeper', emoji: 'ğŸ’š', label: '60é¡Œ' },
        { key: 'blaze', emoji: 'ğŸ”¥', label: '90é¡Œ' },
        { key: 'steve', emoji: 'â­', label: '100é¡Œ' }
      ];

      rewards.forEach(reward => {
        if (gameState.unlockedRewards[reward.key]) {
          const div = document.createElement('div');
          div.className = 'milestone unlocked clickable';
          div.innerHTML = `<span>${reward.emoji}</span><div class="milestone-label">${reward.label}</div>`;
          div.onclick = () => showRewardCard(reward.key);
          endMilestones.appendChild(div);
        }
      });

      if (endMilestones.children.length === 0) {
        endMilestones.innerHTML = '<div style="color: var(--mc-gray);">å°šæœªè§£é–ä»»ä½•çå‹µ</div>';
      }
    }

    function restartGame() {
      gameState = {
        currentLevel: 1,
        totalLevels: 10,
        questionsPerLevel: Math.ceil(wordBank.length / 10),
        currentQuestion: 0,
        totalQuestions: wordBank.length,
        combo: 0,
        maxCombo: 0,
        cookies: 5,
        lives: 3,
        maxLives: 3,
        xp: 0,
        correct: 0,
        wrong: 0,
        skipped: 0,
        diamonds: 0,
        stars: 0,
        currentWord: "",
        answered: false,
        shuffledWords: shuffleArray([...wordBank]),
        unlockedRewards: {
          cow: false,
          creeper: false,
          blaze: false,
          steve: false
        }
      };

      // é‡ç½®é‡Œç¨‹ç¢‘é¡¯ç¤º
      ['milestone30', 'milestone60', 'milestone90', 'milestone100'].forEach(id => {
        document.getElementById(id).classList.remove('unlocked', 'clickable');
      });

      document.getElementById('gamePanel').classList.remove('hidden');
      document.getElementById('endPanel').classList.add('hidden');
      nextQuestion();
      updateDisplay();
    }

    function toggleFullscreen() {
      if (!document.fullscreenElement) {
        document.documentElement.requestFullscreen();
      } else {
        document.exitFullscreen();
      }
    }

    init();
  </script>
</body>
</html>
